Script started on 2022-02-11 19:23:34-05:00 [TERM="xterm" TTY="/dev/pts/9" COLUMNS="117" LINES="62"]
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2$ cd exercises/
[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises$ cd calc/
[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ls
[?2004lcalc.mjs  calc.py  data.txt  expn-data.txt  re	sys
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ cd[K[Knan[Ko [K[Kno calc.py 
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 127 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;7H(B[0;1m[31m #while (check('+') or (check('-'))):[58;8H[36mif[39m(B[m(check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m check((B[0;1m[32m'-'[39m(B[m)):[59;11Hkind = lookahead.kind[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Hmatch(kind)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Hexpr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25l [?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[A[?12l[?25h[?25lp[?12l[?25h[?25lr[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[19d[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[19;60r[60;1H
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[19d[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[K[8G[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26;8H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;8H[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44;8H[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54;8H[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[8G[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[8G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][8G[?12l[?25h[?25l[A[?12l[?25h[?25l[57;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[48;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[38;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[27;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[20;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[10;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12;8H[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25le[?12l[?25h[?25lx[?12l[?25h[?25lp[?12l[?25h[?25lr[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m[1K [49m(B[m [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[K[?12l[?25h[?25l[19;60r[60;1H
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[18;46H[?12l[?25h[?25l[19;16H[?12l[?25h[?25l[20d[?12l[?25h[?25l[21;16H[?12l[?25h[?25l[22;25H[?12l[?25h[?25l[21;16H[?12l[?25h[?25l[22;25H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24;28H[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[26;28H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;18H[?12l[?25h[?25l[29;27H[?12l[?25h[?25l[30;42H[?12l[?25h[?25l[29;27H[?12l[?25h[?25l[30;42H[?12l[?25h[?25l[31;25H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[34;23H[?12l[?25h[?25l[35;27H[?12l[?25h[?25l[36;23H[?12l[?25h[?25l[37due[?12l[?25h[?25l[38d[?12l[?25h[?25l[39;19H[?12l[?25h[?25l[40;24H[?12l[?25h[?25l[41;14H[?12l[?25h[?25l[40;24H[?12l[?25h[?25l[39;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[37;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[32;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[30;42H[?12l[?25h[?25l[29;27H[?12l[?25h[?25l[28;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[26;28H[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[24;28H[?12l[?25h[?25l[23;23H[?12l[?25h[?25l[A):[?12l[?25h[?25l[21;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[21;16H[?12l[?25h[?25l[22;25H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24;28H[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[26;28H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;18H[?12l[?25h[?25l[29;27H[?12l[?25h[?25l[30;42H[?12l[?25h[?25l[29;27H[?12l[?25h[?25l[28;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[26;28H[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[24;28H[?12l[?25h[?25l[23;23H[?12l[?25h[?25l[A):[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25li[1P[?12l[?25h[?25l[1P[?12l[?25h[?25lw (check((B[0;1m[32m'-'[39m(B[m)):[22;10H[?12l[?25h[?25lh (check((B[0;1m[32m'-'[39m(B[m)):[22;11H[?12l[?25h[?25li (check((B[0;1m[32m'-'[39m(B[m)):[22;12H[?12l[?25h[?25ll (check((B[0;1m[32m'-'[39m(B[m)):[22;13H[?12l[?25h[?25l(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[22;14H[?12l[?25h[?25l [?12l[?25h[?25l([?12l[?25h[?25lc[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[26;17H[?12l[?25h[?25l[A[?12l[?25h[?25l[24;17H[?12l[?25h[?25l[A[?12l[?25h[?25l[24d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[?12l[?25h[?25l:[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l(B[0;1m[31m #else:[10G[39m(B[m[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[1P[26;12H[?12l[?25h[?25l[1P[26;11H[?12l[?25h[?25l[1P[26;10H[?12l[?25h[?25l[1P[26;9H[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 125 lines ](B[m[26;9H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py ls[Kcd calc/exercises/[1Pnano calc.pymjs [2Ppymjs [2Ppycd exercises/[5Pcalc/exercises/[1Pnano calc.pymjs [2Ppy./calc.py data.txt [7Pnano calc.py./calc.py data.txt 
[?2004l[0, 3]
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [C[1@e[1@x[11@pn-data.txt[C[C[C[C[C[C[C[C[C[K[K[K[K[K[K[K[K\[K[K
[?2004lexpecting ; at *
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt[4Pdata.txt 
[?2004l[0, 3]
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt expn-data.txt[4Pdata.txt [6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 125 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[31m #else:[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[31;9Hwhil[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25li (check((B[0;1m[32m'-'[39m(B[m)):[31;10H[?12l[?25h[?25l(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[31;11H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[A[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l (B[0;1m[36melse[39m(B[m:[K[9G[?12l[?25h[?25l[35d[?12l[?25h[?25l[16G[1K (B[0;1m[36mreturn[39m(B[m factor()[35;17H[?12l[?25h[?25l[8P[35;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[35;9H (B[0;1m[36mreturn[39m(B[m factor()[35;10H[?12l[?25h[?25l[35;10H (B[0;1m[36mreturn[39m(B[m factor()[35;11H[?12l[?25h[?25l[35;11H (B[0;1m[36mreturn[39m(B[m factor()[35;12H[?12l[?25h[?25lvreturn factor()[35;13H[?12l[?25h[?25l(B[0;1m[36mreturn[39m(B[m[1P[12G[?12l[?25h[?25l[35;12H (B[0;1m[36mreturn[39m(B[m factor()[35;13H[?12l[?25h[?25l[36d[?12l[?25h[?25l[35;13H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28;13H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l+[?12l[?25h[?25l=[?12l[?25h[?25l [?12l[?25h[?25l([?12l[?25h[?25lt[?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25l[28;16H[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;16H[?12l[?25h[?25l[31;23H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[36d[?12l[?25h[?25l[37;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[33d[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[33d[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[33d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[30;16H[?12l[?25h[?25l[31;22H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[35;22H[?12l[?25h[?25l[36d[?12l[?25h[?25l[37;18H[?12l[?25h[?25l[38;22H[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[43;22H[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[41;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[38;22H[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[41;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[40d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[43;23H[?12l[?25h[?25l[44dpr[?12l[?25h[?25l[A[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[41;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[37;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[35;25H[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[33der[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[35;25H[?12l[?25h[?25l[36d[?12l[?25h[?25l[37;18H[?12l[?25h[?25l[38;25H[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[43;23H[?12l[?25h[?25l[44dpr[?12l[?25h[?25l[45d[?12l[?25h[?25l[46due[?12l[?25h[?25l[47d[?12l[?25h[?25l[46;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[46due[?12l[?25h[?25l[47d[?12l[?25h[?25l[46;25H[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[46;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[46due[?12l[?25h[?25l[47d[?12l[?25h[?25l[46;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr[?12l[?25h[?25l[A[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[41;25H[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[43;23H[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[41;25H[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[43;23H[?12l[?25h[?25l[44dpr[?12l[?25h[?25l[A[?12l[?25h[?25l[44dpr[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[44;27H[?12l[?25h[?25l[45;23H[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[44;27H[?12l[?25h[?25l[A[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[43;23H[?12l[?25h[?25l[42;14H[?12l[?25h[?25l[41;25H[?12l[?25h[?25l(B[0;7m<(B[me1 (B[0;1m[36mand[39m(B[m value2?[K[?12l[?25h[?25l[1K (B[0;1m[36mreturn[39m(B[m valueWe know that its infix, so it will look like value1 (** value 2)*. What should be value1 (B[0;1m[36mand[39m(B[0;7m>[42;1H(B[m[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l[A(B[0;7m<(B[me1 (B[0;1m[36mand[39m(B[m value2?[K[?12l[?25h[?25l[?12l[?25h[?25l?[?12l[?25h[?25l[1K (B[0;1m[36mreturn[39m(B[m valueWe know that its infix, so it will look like value1 (** value 2)*. What should be value1 (B[0;1m[36mand[39m(B[0;7m>[42;1H(B[m[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25lv[?12l[?25h[?25la[?12l[?25h[?25ll[?12l[?25h[?25lu[?12l[?25h[?25le[?12l[?25h[?25lW[?12l[?25h[?25le[?12l[?25h[?25l [?12l[?25h[?25lk[?12l[?25h[?25ln[?12l[?25h[?25lo[?12l[?25h[?25lw[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25lh[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25l [?12l[?25h[?25li[?12l[?25h[?25lt[?12l[?25h[?25ls[?12l[?25h[?25l [?12l[?25h[?25li[?12l[?25h[?25ln[?12l[?25h[?25lf[?12l[?25h[?25li[?12l[?25h[?25lx[?12l[?25h[?25l,[?12l[?25h[?25l [?12l[?25h[?25ls[?12l[?25h[?25lo[?12l[?25h[?25l [?12l[?25h[?25li[?12l[?25h[?25lt[?12l[?25h[?25l [?12l[?25h[?25lw[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25ll[?12l[?25h[?25l [?12l[?25h[?25ll[?12l[?25h[?25lo[?12l[?25h[?25lo[?12l[?25h[?25lk[?12l[?25h[?25l [?12l[?25h[?25ll[?12l[?25h[?25li[?12l[?25h[?25lk[?12l[?25h[?25le[?12l[?25h[?25l [?12l[?25h[?25lv[?12l[?25h[?25la[?12l[?25h[?25ll[?12l[?25h[?25lu[?12l[?25h[?25le[?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25l([?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l [?12l[?25h[?25lv[?12l[?25h[?25la[?12l[?25h[?25ll[?12l[?25h[?25lu[?12l[?25h[?25le[?12l[?25h[?25l [?12l[?25h[?25l2[?12l[?25h[?25l)[?12l[?25h[?25l*[?12l[?25h[?25l.[?12l[?25h[?25l [?12l[?25h[?25lW[?12l[?25h[?25lh[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25l [?12l[?25h[?25ls[?12l[?25h[?25lh[?12l[?25h[?25lo[?12l[?25h[?25lu[?12l[?25h[?25ll[?12l[?25h[?25ld[?12l[?25h[?25l [?12l[?25h[?25lb[?12l[?25h[?25le[?12l[?25h[?25l [?12l[?25h[?25lv[?12l[?25h[?25la[?12l[?25h[?25ll[?12l[?25h[?25lu[?12l[?25h[?25le[?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25land [?12l[?25h[?25land v[112G[?12l[?25h[?25land va[111G[?12l[?25h[?25land val[110G[?12l[?25h[?25land valu[41;109H[?12l[?25h[?25lnd value[41;108H[?12l[?25h[?25la[?12l[?25h[?25ln[?12l[?25h[?25ld[?12l[?25h[?25l [?12l[?25h[?25lv[?12l[?25h[?25la[?12l[?25h[?25ll[?12l[?25h[?25l(B[0;7m<(B[m value2?[K[?12l[?25h[?25le[?12l[?25h[?25l2[?12l[?25h[?25l?[?12l[?25h[?25l  [1K (B[0;1m[36mreturn[39m(B[m valueWe know that its infix, so it will look like value1 (** value 2)*. What should be vand value(B[0;7m>[42;1H(B[m[?12l[?25h[?25l[A(B[0;7m<(B[m value2?[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[12G[1K (B[0;1m[36mreturn[39m(B[m valueWe know that its infix, so it will look like value1 (** value 2)*. What should be vand val[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l(B[0;1m[36min[39m(B[m[K[?12l[?25h[?25li[K[?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[37;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[35;25H[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;25H[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l7[34;59r8[34dM[1;62r[34;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[1K e[?12l[?25h[?25ll[?12l[?25h[?25li[?12l[?25h[?25l(B[0;1m[36melif[39m(B[m[?12l[?25h[?25l([?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l ([?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25lc[?12l[?25h[?25lk[?12l[?25h[?25l([?12l[?25h[?25l'[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l)[?12l[?25h[?25l [?12l[?25h[?25l;[?12l[?25h[?25l [?12l[?25h[?25l(B[0;1m[32m'**'[39m(B[m[?12l[?25h[?25l)[?12l[?25h[?25l)[?12l[?25h[?25l"[?12l[?25h[?25l [?12l[?25h[?25l"[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l"[?12l[?25h[?25l [?12l[?25h[?25l:[?12l[?25h[?25l7[35;59r8[35dM[1;62r[35;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[16G[42m[1K [49m(B[m[?12l[?25h[?25l[35;9H[K[?12l[?25h[?25l[16G[42m[1K [49m(B[m[?12l[?25h[?25l[1K m[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l'[?12l[?25h[?25l [?12l[?25h[?25l([?12l[?25h[?25l'[?12l[?25h[?25l+[?12l[?25h[?25l [?12l[?25h[?25l=[?12l[?25h[?25l [?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l)[?12l[?25h[?25l [?12l[?25h[?25l(B[0;1m[32m'**'[39m(B[m[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[35;9H[?12l[?25h[?25l[?12l[?25h[?25l[34;28H[?12l[?25h[?25l[35d[?12l[?25h[?25l[35;9H[?12l[?25h[?25l[35;17H[?12l[?25h[?25lm[?12l[?25h[?25l[?12l[?25h[?25l[8P[35;9H[?12l[?25h[?25l[16G[1K match((B[0;1m[32m'**'[39m(B[m)[35;17H[?12l[?25h[?25l[8P[35;9H[?12l[?25h[?25l[35;9H match((B[0;1m[32m'**'[39m(B[m)[35;10H[?12l[?25h[?25l[35;10H match((B[0;1m[32m'**'[39m(B[m)[35;11H[?12l[?25h[?25l[35;11H match((B[0;1m[32m'**'[39m(B[m)[35;12H[?12l[?25h[?25l[35;12H match((B[0;1m[32m'**'[39m(B[m)[35;13H[?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l([?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[A[?12l[?25h[?25l[35d[?12l[?25h[?25l[36;14H[?12l[?25h[?25l[35;24H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A)[?12l[?25h[?25l[30;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[28;16H[?12l[?25h[?25l[27;24H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[Aah[?12l[?25h[?25l[A[?12l[?25h[?25l[22;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[19;22H[?12l[?25h[?25l[A)[?12l[?25h[?25l[Ae[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[12;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[An[?12l[?25h[?25l[9;14H[?12l[?25h[?25l[8;24H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;60r8M[1;62r[2;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hlookahead = nextToken()[2;24H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[2;24H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[2;24H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mdef[34m parse[39m(B[m(text):[?12l[?25h[?25l[3d[?12l[?25h[?25l[4;24H[?12l[?25h[?25l[5;21H[?12l[?25h[?25l[6;24H[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9;14H[?12l[?25h[?25l[10;24H[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13;21H[?12l[?25h[?25l[14dex[?12l[?25h[?25l[15de[?12l[?25h[?25l[16d[?12l[?25h[?25l[17;14H[?12l[?25h[?25l[18;24H[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22;19H[?12l[?25h[?25l[23d][?12l[?25h[?25l[24;24H[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29;16H[?12l[?25h[?25l[30d()[?12l[?25h[?25l[31;24H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d ([?12l[?25h[?25l[36;16H[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;16H[?12l[?25h[?25l[39;24H[?12l[?25h[?25l[40d[?12l[?25h[?25l[41de[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l7[44;59r8[44dM[1;62r[44;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[16G[42m[1K [49m(B[m[?12l[?25h[?25l[1K r[?12l[?25h[?25le[?12l[?25h[?25lt[?12l[?25h[?25lu[?12l[?25h[?25lr[?12l[?25h[?25l[17G(B[0;1m[36mreturn[39m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l [?12l[?25h[?25l[17Gretur[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m[1K [49m(B[m [?12l[?25h[?25l[44;9H[K[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[K[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[1K r[?12l[?25h[?25le[?12l[?25h[?25lt[?12l[?25h[?25lu[?12l[?25h[?25lr[?12l[?25h[?25l[13G(B[0;1m[36mreturn[39m(B[m[?12l[?25h[?25l[13Greturnr[?12l[?25h[?25le[?12l[?25h[?25l [?12l[?25h[?25l[13G(B[0;1m[36mreturn[39m(B[m[K[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25l,[?12l[?25h[?25l [?12l[?25h[?25l,[?12l[?25h[?25l [?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l *[?12l[?25h[?25l*[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l term[?12l[?25h[?25l(term[?12l[?25h[?25l)term[?12l[?25h[?25lterm[K[?12l[?25h[?25lterm[K[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[43;24H[?12l[?25h[?25l[42;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[42d[?12l[?25h[?25l[43;24H[?12l[?25h[?25l[42;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[40;23H[?12l[?25h[?25l[41;28H[?12l[?25h[?25l[42d[?12l[?25h[?25l[43;24H[?12l[?25h[?25l[44;36H[?12l[?25h[?25l[45;14H[?12l[?25h[?25l[44;36H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l' term()[30G[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l(B[0;1m[32m' **'[39m(B[m term()[44;27H[?12l[?25h[?25l[C[?12l[?25h[?25l[1P[?12l[?25h[?25l[?12l[?25h[?25l (B[0;1m[32m'**'[39m(B[m term()[44;27H[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[43;24H[?12l[?25h[?25l[42;28H[?12l[?25h[?25l[43;24H[?12l[?25h[?25l[44;29H[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l'**[1P[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[1P[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 128 lines ](B[m[44;27H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [6@./calc.py data.txt[C
[?2004l  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 67
    elif (check('**')):
TabError: inconsistent use of tabs and spaces in indentation
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 128 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[61;17H             (B[0;7m^W(B[m Begin of Paragr.          (B[0;7m^Y(B[m First Line   [81G       (B[0;7m^T(B[m Go To Text[K[62;2H(B[0;7mC(B[m Cancel[17G             (B[0;7m^O(B[m End of Paragraph          (B[0;7m^V(B[m Last Line[K[61;101H[A(B[0;7mEnter line number, column number:                                                                                    [60;35H(B[m[?12l[?25h[?25l(B[0;7m6(B[m[?12l[?25h[?25l(B[0;7m7(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Paste        (B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d    (B[0;1m[36mdef[34m nextToken[39m(B[m():[K[3;9H(B[0;1m[36mnonlocal[39m(B[m index[4;8H[1K (B[0;1m[36mif[39m(B[m (index >= len(tokens)):[5;12H[1K (B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[6;8H[1K (B[0;1m[36melse[39m(B[m:[K[7dtok = tokens[index][8;13Hindex += 1[9;12H[1K (B[0;1m[36mreturn[39m(B[m tok[10d[K[11d    (B[0;1m[36mdef[34m program[39m(B[m():[K[12;8H[1K values = [][13;8H[1K (B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[14;12H[1K values.append(expr())[15;12H[1K match((B[0;1m[32m';'[39m(B[m)[K[16;8H[1K (B[0;1m[36mreturn[39m(B[m values[17d[K[18d    (B[0;1m[36mdef[34m expr[39m(B[m():[19;7H[1K t = term()[20;7H[1K (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[21;10H[1K kind = lookahead.kind[22;10H[1K match(kind)[23;10H[1K t1 = term()[24;10H[1K t += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[25;7H[1K (B[0;1m[36mreturn[39m(B[m t[27d    (B[0;1m[36mdef[34m term[39m(B[m():[K[28;8H[1K (B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[29;13Hmatch((B[0;1m[32m'-'[39m(B[m)[30;12H[1K (B[0;1m[36mreturn[39m(B[m - term()[K[31;5H    (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[32;9H    match((B[0;1m[32m'**'[39m(B[m)[K[33;9H    (B[0;1m[36mreturn[39m(B[m term() ** term()[K[34;9H(B[0;1m[36melse[39m(B[m:[K[35;9H    (B[0;1m[36mreturn[39m(B[m factor()[36d[K[37;5H(B[0;1m[36mdef[34m factor[39m(B[m():[K[38;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[39;12H[1K value = int(lookahead.lexeme)[40;9H    match((B[0;1m[32m'INT'[39m(B[m)[41;9H    (B[0;1m[36mreturn[39m(B[m value[K[42;9H(B[0;1m[36melse[39m(B[m:[K[43;9H    match((B[0;1m[32m'('[39m(B[m)[44;13Hvalue = expr()[K[45;13Hmatch((B[0;1m[32m')'[39m(B[m)[46;20Hvalue[48;4H(B[0;1m[31m #begin parse()[49;5H[39m(B[mtokens = scan(text)[50;5Hindex = 0[K[51;5Hlookahead = nextToken()[K[52;5Hvalue = program()[K[53;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[54;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[55;5H    sys.exit(1)[56;5H(B[0;1m[36mreturn[39m(B[m value[K[57d[K[58d(B[0;1m[36mdef[34m scan[39m(B[m(text):[K[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[31d[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[31d[8P[?12l[?25h[?25l (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)): [?12l[?25h[?25l  (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):  [?12l[?25h[?25l   (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):   [?12l[?25h[?25l    (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[5G[?12l[?25h[?25l     (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[6G[?12l[?25h[?25l      (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[7G[?12l[?25h[?25l[7G (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[8G[?12l[?25h[?25l[8G (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[31;9H[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 128 lines ](B[m[31;9H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [6@./calc.py data.txt[C
[?2004l  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 68
    match('**')
TabError: inconsistent use of tabs and spaces in indentation
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt 
[?2004l  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 68
    match('**')
TabError: inconsistent use of tabs and spaces in indentation
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 128 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[61;17H             (B[0;7m^W(B[m Begin of Paragr.          (B[0;7m^Y(B[m First Line   [81G       (B[0;7m^T(B[m Go To Text[K[62;2H(B[0;7mC(B[m Cancel[17G             (B[0;7m^O(B[m End of Paragraph          (B[0;7m^V(B[m Last Line[K[61;101H[A(B[0;7mEnter line number, column number:                                                                                    [60;35H(B[m[?12l[?25h[?25l(B[0;7m6(B[m[?12l[?25h[?25l(B[0;7m8(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Paste        (B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2;8H[1K (B[0;1m[36mnonlocal[39m(B[m index[3;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[4;12H[1K (B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[5;8H[1K (B[0;1m[36melse[39m(B[m:[6d[1K tok = tokens[index][K[7;13Hindex += 1[8;13H(B[0;1m[36mreturn[39m(B[m tok[9d[K[10d    (B[0;1m[36mdef[34m program[39m(B[m():[11;8H[1K values = [][K[12;8H[1K (B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[13;12H[1K values.append(expr())[14;12H[1K match((B[0;1m[32m';'[39m(B[m)[15;8H[1K (B[0;1m[36mreturn[39m(B[m values[K[16d[K[17d    (B[0;1m[36mdef[34m expr[39m(B[m():[18;7H[1K t = term()[19;7H[1K (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[20;10H[1K kind = lookahead.kind[21;10H[1K match(kind)[22;10H[1K t1 = term()[23;10H[1K t += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[24;7H[1K (B[0;1m[36mreturn[39m(B[m t[25d[K[26;5H(B[0;1m[36mdef[34m term[39m(B[m():[27;8H[1K (B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[K[28;12H[1K match((B[0;1m[32m'-'[39m(B[m)[29;13H(B[0;1m[36mreturn[39m(B[m - term()[30;5H    (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[K[31;12H[1K match((B[0;1m[32m'**'[39m(B[m)[32;9H    (B[0;1m[36mreturn[39m(B[m term() ** term()[33;9H(B[0;1m[36melse[39m(B[m:[K[34d(B[0;1m[36mreturn[39m(B[m factor()[K[35d[K[36;5H(B[0;1m[36mdef[34m factor[39m(B[m():[K[37;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[K[38;13Hvalue = int(lookahead.lexeme)[39;12H[1K match((B[0;1m[32m'INT'[39m(B[m)[40;9H    (B[0;1m[36mreturn[39m(B[m value[41;9H(B[0;1m[36melse[39m(B[m:[K[42dmatch((B[0;1m[32m'('[39m(B[m)[K[43;9H    value = expr()[44;13Hmatch((B[0;1m[32m')'[39m(B[m)[K[45;13H(B[0;1m[36mreturn[39m(B[m value[46d[K[47;4H(B[0;1m[31m #begin parse()[48;5H[39m(B[mtokens = scan(text)[49;5Hindex = 0[K[50;5Hlookahead = nextToken()[K[51;5Hvalue = program()[K[52;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[53;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[54;9Hsys.exit(1)[55;5H(B[0;1m[36mreturn[39m(B[m value[56d[K[57d(B[0;1m[36mdef[34m scan[39m(B[m(text):[K[58;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[K[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[31d[?12l[?25h[?25l[31;9H[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[31d[1P[31;12H[?12l[?25h[?25l[1P[31;11H[?12l[?25h[?25l[1P[31;10H[?12l[?25h[?25l[1P[31;9H[?12l[?25h[?25l[8P[?12l[?25h[?25l match((B[0;1m[32m'**'[39m(B[m) [?12l[?25h[?25l  match((B[0;1m[32m'**'[39m(B[m)  [?12l[?25h[?25l   match((B[0;1m[32m'**'[39m(B[m)   [?12l[?25h[?25l    match((B[0;1m[32m'**'[39m(B[m)[5G[?12l[?25h[?25l     match((B[0;1m[32m'**'[39m(B[m)[6G[?12l[?25h[?25l      match((B[0;1m[32m'**'[39m(B[m)[7G[?12l[?25h[?25l[7G match((B[0;1m[32m'**'[39m(B[m)[8G[?12l[?25h[?25l[8G match((B[0;1m[32m'**'[39m(B[m)[31;9H[?12l[?25h[?25l[31;9H match((B[0;1m[32m'**'[39m(B[m)[31;10H[?12l[?25h[?25l[31;10H match((B[0;1m[32m'**'[39m(B[m)[31;11H[?12l[?25h[?25l[31;11H match((B[0;1m[32m'**'[39m(B[m)[31;12H[?12l[?25h[?25l[31;12H match((B[0;1m[32m'**'[39m(B[m)[31;13H[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 128 lines ](B[m[31;13H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py 
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 128 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[61;17H             (B[0;7m^W(B[m Begin of Paragr.          (B[0;7m^Y(B[m First Line   [81G       (B[0;7m^T(B[m Go To Text[K[62;2H(B[0;7mC(B[m Cancel[17G             (B[0;7m^O(B[m End of Paragraph          (B[0;7m^V(B[m Last Line[K[61;101H[A(B[0;7mEnter line number, column number:                                                                                    [60;35H(B[m[?12l[?25h[?25l(B[0;7m6(B[m[?12l[?25h[?25l(B[0;7m9(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Paste        (B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2;8H[1K (B[0;1m[36mif[39m(B[m (index >= len(tokens)):[3;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[4;8H[1K (B[0;1m[36melse[39m(B[m:[5d[1K tok = tokens[index][6;12H[1K index += 1[K[7;13H(B[0;1m[36mreturn[39m(B[m tok[9d    (B[0;1m[36mdef[34m program[39m(B[m():[10;8H[1K values = [][11;8H[1K (B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[12;12H[1K values.append(expr())[13;12H[1K match((B[0;1m[32m';'[39m(B[m)[14;8H[1K (B[0;1m[36mreturn[39m(B[m values[15d[K[16d    (B[0;1m[36mdef[34m expr[39m(B[m():[17;7H[1K t = term()[18;7H[1K (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[19;10H[1K kind = lookahead.kind[20;10H[1K match(kind)[21;10H[1K t1 = term()[22;10H[1K t += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[23;7H[1K (B[0;1m[36mreturn[39m(B[m t[K[24d[K[25d    (B[0;1m[36mdef[34m term[39m(B[m():[26;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[27;12H[1K match((B[0;1m[32m'-'[39m(B[m)[K[28;12H[1K (B[0;1m[36mreturn[39m(B[m - term()[29;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[30;12H[1K match((B[0;1m[32m'**'[39m(B[m)[K[31;12H[1K (B[0;1m[36mreturn[39m(B[m term() ** term()[32;9H(B[0;1m[36melse[39m(B[m:[K[33;9H    (B[0;1m[36mreturn[39m(B[m factor()[K[34d[K[35;5H(B[0;1m[36mdef[34m factor[39m(B[m():[36;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[K[37;13Hvalue = int(lookahead.lexeme)[38;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[39;12H[1K (B[0;1m[36mreturn[39m(B[m value[40;9H(B[0;1m[36melse[39m(B[m:[K[41;9H    match((B[0;1m[32m'('[39m(B[m)[K[42;13Hvalue = expr()[K[43;9H    match((B[0;1m[32m')'[39m(B[m)[44;13H(B[0;1m[36mreturn[39m(B[m value[K[45d[K[46;4H(B[0;1m[31m #begin parse()[39m(B[m[K[47;5Htokens = scan(text)[48;5Hindex = 0[K[49;5Hlookahead = nextToken()[50;5Hvalue = program()[K[51;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[K[52;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[53;9Hsys.exit(1)[K[54;5H(B[0;1m[36mreturn[39m(B[m value[55d[K[56d(B[0;1m[36mdef[34m scan[39m(B[m(text):[K[57;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[K[58;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[31d[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[32d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l [?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[31;26H[1P[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l [?12l[?25h[?25l[1P[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 128 lines ](B[m[31;28H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [6@./calc.py data.txt[C
[?2004l[0, 3]
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [1@e[C[C[C[C[C[C[C[C[1P [1P [1P [1P [1P [1P [1P [1P [1P e xpn-data.txt 
[?2004lexpecting ; at *
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [5P[C[C[C[C[C[C[C[C[C[6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 128 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term()**term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch:                                                                                                              [60;9H(B[m[?12l[?25h[?25l(B[0;7ms(B[m[?12l[?25h[?25l(B[0;7mc(B[m[?12l[?25h[?25l(B[0;7ma(B[m[?12l[?25h[?25l(B[0;7mn(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[58;5H[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[5G[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hcontents = readFile(sys.argv[1]);[5G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(parse(contents))[5G[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A    [?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A    [?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;5H[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56;5H[?12l[?25h[?25l[A[?12l[?25h[?25l[A    [?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A    [?12l[?25h[?25l[47d[?12l[?25h[?25l[48;5H[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A    [?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lm[?12l[?25h[?25l[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;9H[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[46;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[A[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[46;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[37;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[27;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[16;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[6;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;59r8M[1;62r[2;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[2;9H[?12l[?25h[?25l7[2;59r8M[1;62r[2;8Ht = term()[2;9H[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m expr[39m(B[m():[9G[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l[3;9H[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12;9H[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22;9H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;9H[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43;9H[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52;9H[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hcontents = readFile(sys.argv[1]);[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(parse(contents))[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m readFile[39m(B[m(path):[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwith[39m(B[m open(path, (B[0;1m[32m'r'[39m(B[m) (B[0;1m[36mas[39m(B[m file:[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hcontent = file.read()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m content[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1HToken = namedtuple((B[0;1m[32m'Token'[39m(B[m, [(B[0;1m[32m'kind'[39m(B[m, (B[0;1m[32m'lexeme'[39m(B[m])[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m usage[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(f(B[0;1m[32m'usage: {sys.argv[0]} DATA_FILE'[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hsys.exit(1)[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mif[39m(B[m __name__ == (B[0;1m[32m"__main__"[39m(B[m:[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hmain()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[58;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[55;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[51;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[49;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[44;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;9H[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[22;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[12;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14;9H[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24;9H[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;9H[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41;9H[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46;9H[?12l[?25h[?25l[47d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[44;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[24;9H[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[31;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[29;9H  (match, kind) =(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[29;26H[?12l[?25h[?25l[29;9H[29;26H  (match, kind) =(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[29;43H[?12l[?25h[?25l[60;52H(B[0;7m[ Undid paste ](B[m[29;9H[17P[29;26H[?12l[?25h[?25l[60;67H[1;66H(B[0;7m [116G(B[m[29;9H[17P[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[29;9H  (match, kind) =(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[60d[K[29;26H[?12l[?25h[?25l[60;52H(B[0;7m[ Undid paste ](B[m[1;66H(B[0;7m [116G(B[m[29;9H[17P[?12l[?25h[?25l[61;17H             (B[0;7m^W(B[m Begin of Paragr.          (B[0;7m^Y(B[m First Line   [81G       (B[0;7m^T(B[m Go To Text[K[62;2H(B[0;7mC(B[m Cancel[17G             (B[0;7m^O(B[m End of Paragraph          (B[0;7m^V(B[m Last Line[K[61;101H[A(B[0;7mEnter line number, column number:                                                                                    [60;35H(B[m[?12l[?25h[?25l(B[0;7m1(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Paste        (B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[3d[39m(B[m[K[4d(B[0;1m[36mimport[39m(B[m re[K[5d(B[0;1m[36mimport[39m(B[m sys[K[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[7d[K[8d[K[9d(B[0;1m[32m"""[39m(B[m[K[10d(B[0;1m[32mprogram[39m(B[m[K[11d(B[0;1m[32m  : expr ';' program[39m(B[m[K[12d(B[0;1m[32m  | #empty[39m(B[m[K[13d(B[0;1m[32m  ;[14dexpr[39m(B[m[K[15d(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[39m(B[m[K[17d(B[0;1m[32mterm[39m(B[m[K[18d(B[0;1m[32m  : '-' term[39m(B[m[K[19d(B[0;1m[32m  | factor[39m(B[m[K[20d(B[0;1m[32m  ;[39m(B[m[K[21d(B[0;1m[32mfactor[39m(B[m[K[22d(B[0;1m[32m  : INT[39m(B[m[K[23d(B[0;1m[32m  | '(' expr ')'[24d  ;[39m(B[m[K[25d(B[0;1m[32m"""[39m(B[m[K[26d[K[27d(B[0;1m[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[K[29d[K[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[K[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[K[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;5H    (B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;12H[1K lookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[K[36;9H    print(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;18H[1K file=sys.stderr)[K[38;9H    sys.exit(1)[K[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;8H[1K (B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;12H[1K (B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;5H    (B[0;1m[36melse[39m(B[m:[K[44d[1K tok = tokens[index][45;13Hindex += 1[46;12H[1K (B[0;1m[36mreturn[39m(B[m tok[47d[K[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[K[49;5H    values = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;12H[1K values.append(expr())[K[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;8H[1K (B[0;1m[36mreturn[39m(B[m values[54d[K[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;7H[1K (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;10H[1K kind = lookahead.kind[59;11Hmatch(kind)[2;9H[?12l[?25h[?25l[3d[?12l[?25h[?25l[4;9H[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch [scan]:                                                                                                       [60;16H(B[m[?12l[?25h[?25l(B[0;7ms(B[m[?12l[?25h[?25l(B[0;7mc(B[m[?12l[?25h[?25l(B[0;7ma(B[m[?12l[?25h[?25l(B[0;7mn(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2;7H[1K (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[3;11Hkind = lookahead.kind[4;10H[1K match(kind)[5;10H[1K t1 = term()[6;10H[1K t += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[7;8H(B[0;1m[36mreturn[39m(B[m t[9d    (B[0;1m[36mdef[34m term[39m(B[m():[10;8H[1K (B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[11;12H[1K match((B[0;1m[32m'-'[39m(B[m)[12;12H[1K (B[0;1m[36mreturn[39m(B[m - term()[13;8H[1K (B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[14;12H[1K match((B[0;1m[32m'**'[39m(B[m)[15;12H[1K (B[0;1m[36mreturn[39m(B[m term()**term()[K[16;8H[1K (B[0;1m[36melse[39m(B[m:[17d[1K (B[0;1m[36mreturn[39m(B[m factor()[18d[K[19d    (B[0;1m[36mdef[34m factor[39m(B[m():[20;8H[1K (B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[21;12H[1K value = int(lookahead.lexeme)[22;12H[1K match((B[0;1m[32m'INT'[39m(B[m)[23;12H[1K (B[0;1m[36mreturn[39m(B[m value[24;8H[1K (B[0;1m[36melse[39m(B[m:[25d[1K match((B[0;1m[32m'('[39m(B[m)[26;13Hvalue = expr()[27;12H[1K match((B[0;1m[32m')'[39m(B[m)[K[28;12H[1K (B[0;1m[36mreturn[39m(B[m value[30;4H(B[0;1m[31m #begin parse()[39m(B[m[K[31;5Htokens = scan(text)[32;5Hindex = 0[K[33;5Hlookahead = nextToken()[K[34;5Hvalue = program()[K[35;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[36;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[37;9Hsys.exit(1)[K[38;5H(B[0;1m[36mreturn[39m(B[m value[K[39d[K[40d(B[0;1m[36mdef[34m scan[39m(B[m(text):[K[41;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[K[42;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[43;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[44;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[45;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[46;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[47;9H[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[48d[K[49;5Htoken[4P[50;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[K[51;9H(match, kind) = next_match(text)[52;9Hlexeme = match.group()[53;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[54;9Htext = text[len(lexeme):][55;5H(B[0;1m[36mreturn[39m(B[m tokens[56d[K[57d(B[0;1m[36mdef[34m main[39m(B[m():[K[58;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[59;5Hcontents = readFile(sys.argv[1]);[31;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[17;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19;14H[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;14H[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;14H[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40;14H[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[38;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[32d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[17;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19;14H[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;14H[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40;14H[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[38;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[28d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;14H[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40;14H[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49;14H[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[49;14H[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57;12H[?12l[?25h[?25l[58d(s[?12l[?25h[?25l[59d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[55;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[47;14H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l([?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lx[?12l[?25h[?25lt[?12l[?25h[?25l)[?12l[?25h[?25l:[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[42;59r[42;1HM[1;62r[42;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[1K i[?12l[?25h[?25l(B[0;1m[36mif[39m(B[m[?12l[?25h[?25l([?12l[?25h[?25lm[?12l[?25h[?25l)[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l [?12l[?25h[?25l:[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25li[K[?12l[?25h[?25l[42m[1K [49m(B[m [?12l[?25h[?25l[1K m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l =[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l r[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25lm[?12l[?25h[?25lp[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25l([?12l[?25h[?25lr[?12l[?25h[?25l'[?12l[?25h[?25l\[?12l[?25h[?25l'[?12l[?25h[?25l)[?12l[?25h[?25l.[?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l([?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lx[?12l[?25h[?25lt[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l(B[0;1m[32m'\s'[39m(B[m).match(text)[42;28H[?12l[?25h[?25l'\'[1P[?12l[?25h[?25l(B[0;1m[32m'\['[39m(B[m).match(text)[42;28H[?12l[?25h[?25l(B[0;1m[32m]'[39m(B[m).match(text)[42;29H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[1P[?12l[?25h[?25l[C[?12l[?25h[?25l(B[0;1m[32m*]'[39m(B[m).match(text)[42;28H[?12l[?25h[?25l(B[0;1m[32m**]'[39m(B[m).match(text)[42;29H[?12l[?25h[?25l[C[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[C[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l(B[0;1m[32m('[39m(B[m).match(text)[42;27H[?12l[?25h[?25l(B[0;1m[32m*'[39m(B[m).match(text)[42;28H[?12l[?25h[?25l(B[0;1m[32m**'[39m(B[m).match(text)[42;29H[?12l[?25h[?25l(B[0;1m[32m)'[39m(B[m).match(text)[42;30H[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l.[?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l([?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lx[?12l[?25h[?25lt[?12l[?25h[?25l)[?12l[?25h[?25l7[43;59r8[43dM[1;62r[43;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[1K f[?12l[?25h[?25l[42m[1K [49m(B[m [?12l[?25h[?25l[1K i[?12l[?25h[?25l(B[0;1m[36mif[39m(B[m[?12l[?25h[?25l([?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l ([?12l[?25h[?25lm[?12l[?25h[?25l)[?12l[?25h[?25l:[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l r[?12l[?25h[?25le[?12l[?25h[?25lt[?12l[?25h[?25lu[?12l[?25h[?25lr[?12l[?25h[?25l[17G(B[0;1m[36mreturn[39m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l ([?12l[?25h[?25lm[?12l[?25h[?25l,[?12l[?25h[?25l;[?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l '[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l(B[0;1m[32m' '[39m(B[m[?12l[?25h[?25l)[?12l[?25h[?25l[A[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[42;32H[?12l[?25h[?25l.[?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l([?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lx[?12l[?25h[?25lt[?12l[?25h[?25l)[?12l[?25h[?25l7[43;59r8[43dM[1;62r[43;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[1K i[?12l[?25h[?25l(B[0;1m[36mif[39m(B[m[?12l[?25h[?25li[K[?12l[?25h[?25l[42m[1K [49m(B[m [?12l[?25h[?25l[K[?12l[?25h[?25l[43;60r[60;1H
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[42;44H[?12l[?25h[?25l[43;32H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l(B[0;1m[32m'[39m(B[m)[K[?12l[?25h[?25l(B[0;1m[32mI'[39m(B[m)[?12l[?25h[?25l(B[0;1m[32mN'[39m(B[m)[?12l[?25h[?25l(B[0;1m[32m'[39m(B[m)[K[?12l[?25h[?25l(B[0;1m[32mN'[39m(B[m)[?12l[?25h[?25l(B[0;1m[32mT'[39m(B[m)[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 130 lines ](B[m[43;34H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C[5P[C[C[C[C[C[C[C[C[C
[?2004l  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 96
    m = re.compile(r'(**)').match(text)
TabError: inconsistent use of tabs and spaces in indentation
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [6Pnano calc.py[C[11@./calc.py expn-data.txt[C[11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 130 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term()**term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l[A[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[51;9H[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[51d[8P[?12l[?25h[?25l m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text) [?12l[?25h[?25l  m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)  [?12l[?25h[?25l   m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)   [?12l[?25h[?25l    m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[5G[?12l[?25h[?25l     m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[6G[?12l[?25h[?25l      m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[7G[?12l[?25h[?25l[7G m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[8G[?12l[?25h[?25l[8G m = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[51;9H[?12l[?25h[?25l[52d[?12l[?25h[?25l[8P[?12l[?25h[?25l (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m) [?12l[?25h[?25l  (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)  [?12l[?25h[?25l   (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)   [?12l[?25h[?25l    (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[5G[?12l[?25h[?25l     (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[6G[?12l[?25h[?25l      (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[7G[?12l[?25h[?25l[7G (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[8G[?12l[?25h[?25l[8G (B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[52;9H[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 130 lines ](B[m[52;9H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [6@./calc.py data.txt[C
[?2004lTraceback (most recent call last):
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 130, in <module>
    main()
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 116, in main
    print(parse(contents))
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 85, in parse
    tokens = scan(text)
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 107, in scan
    (match, kind) = next_match(text)
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 96, in next_match
    m = re.compile(r'(**)').match(text)
  File "/usr/lib/python3.9/re.py", line 252, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python3.9/re.py", line 304, in _compile
    p = sre_compile.compile(pattern, flags)
  File "/usr/lib/python3.9/sre_compile.py", line 764, in compile
    p = sre_parse.parse(p, flags)
  File "/usr/lib/python3.9/sre_parse.py", line 948, in parse
    p = _parse_sub(source, state, flags & SRE_FLAG_VERBOSE, 0)
  File "/usr/lib/python3.9/sre_parse.py", line 443, in _parse_sub
    itemsappend(_parse(source, state, verbose, nested + 1,
  File "/usr/lib/python3.9/sre_parse.py", line 834, in _parse
    p = _parse_sub(source, state, sub_verbose, nested + 1)
  File "/usr/lib/python3.9/sre_parse.py", line 443, in _parse_sub
    itemsappend(_parse(source, state, verbose, nested + 1,
  File "/usr/lib/python3.9/sre_parse.py", line 668, in _parse
    raise source.error("nothing to repeat",
re.error: nothing to repeat at position 1
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [6Pnano calc.py[C[6@./calc.py data.txt[C[6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 130 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term()**term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[43;26H[?12l[?25h[?25l[44d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[42;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[40;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[38;26H[?12l[?25h[?25l[39;20H[?12l[?25h[?25l[40;17H[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;16H[?12l[?25h[?25l[43;26H[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[42;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[40;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[38;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[Aoken[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[33;24H[?12l[?25h[?25l[32;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[30;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr([?12l[?25h[?25l[A[?12l[?25h[?25l[26;14H[?12l[?25h[?25l[25;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Al[?12l[?25h[?25l[A[?12l[?25h[?25l[21;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[19;26H[?12l[?25h[?25l[18;14H[?12l[?25h[?25l[17;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[15;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A):[?12l[?25h[?25l[11;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[9;16H[?12l[?25h[?25l[8;26H[?12l[?25h[?25l[9;16H[?12l[?25h[?25l[10d[?12l[?25h[?25l[11;16H[?12l[?25h[?25l[12;25H[?12l[?25h[?25l[13d[?12l[?25h[?25l[14;26H[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d()[?12l[?25h[?25l[18;14H[?12l[?25h[?25l[19;26H[?12l[?25h[?25l[20d[?12l[?25h[?25l[21;18H[?12l[?25h[?25l[22;26H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26;14H[?12l[?25h[?25l[27;23H[?12l[?25h[?25l[28;26H[?12l[?25h[?25l[29;23H[?12l[?25h[?25l[30due[?12l[?25h[?25l[31d[?12l[?25h[?25l[32;19H[?12l[?25h[?25l[33;24H[?12l[?25h[?25l[34;14H[?12l[?25h[?25l[35;26H[?12l[?25h[?25l[36;22H[?12l[?25h[?25l[37;26H[?12l[?25h[?25l[38d[?12l[?25h[?25l[39;20H[?12l[?25h[?25l[40;17H[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;16H[?12l[?25h[?25l[43;26H[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[A[?12l[?25h[?25l,[?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[46d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l.[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[46d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48da[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53;16H[?12l[?25h[?25l[54;27H[?12l[?25h[?25l[55;34H[?12l[?25h[?25l[56;31H[?12l[?25h[?25l[57;34H[?12l[?25h[?25l[58d[?12l[?25h[?25l[59;18H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hcontents = readFile(sys.argv[1]);[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(parse(contents))[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m readFile[39m(B[m(path):[?12l[?25h[?25l[A[?12l[?25h[?25l[57;27H[?12l[?25h[?25l[56;34H[?12l[?25h[?25l[A[?12l[?25h[?25l[54;12H[?12l[?25h[?25l[A[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[51;34H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[Aatc[?12l[?25h[?25l[47;27H[?12l[?25h[?25l[46;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[44;34H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[Aa[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[36;26H[?12l[?25h[?25l[35;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[33;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[31;34H[?12l[?25h[?25l[30;27H[?12l[?25h[?25l[29;22H[?12l[?25h[?25l[28;28H[?12l[?25h[?25l[27;14H[?12l[?25h[?25l[26;24H[?12l[?25h[?25l[25;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[23;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[19;14H[?12l[?25h[?25l[18;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[16;34H[?12l[?25h[?25l[15;27H[?12l[?25h[?25l[14;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[12;28H[?12l[?25h[?25l[11;14H[?12l[?25h[?25l[10;34H[?12l[?25h[?25l[9;24H[?12l[?25h[?25l[8;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[6;23H[?12l[?25h[?25l[A):[?12l[?25h[?25l[4;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[2;16H[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[2;34H[?12l[?25h[?25l7[2;60r8M[1;62r[2;11Ht1 = term()[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Hmatch(kind)[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Hkind = lookahead.kind[?12l[?25h[?25l7[2;59r8M[1;62r[2;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[2;34H[?12l[?25h[?25l7[2;59r8M[1;62r[2;8Ht = term()[?12l[?25h[?25l7[2;60r8M[1;62r[2;5H(B[0;1m[36mdef[34m expr[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mreturn[39m(B[m values[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hmatch((B[0;1m[32m';'[39m(B[m)[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hvalues.append(expr())[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;59r8M[1;62r[2;9Hvalues = [][?12l[?25h[?25l[3;34H[?12l[?25h[?25l[4d[?12l[?25h[?25l[5;23H[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8;16H[?12l[?25h[?25l[9d()[?12l[?25h[?25l[10;34H[?12l[?25h[?25l[11d[?12l[?25h[?25l[12;22H[?12l[?25h[?25l[13d[?12l[?25h[?25l[14;34H[?12l[?25h[?25l[15;16H[?12l[?25h[?25l[16d[?12l[?25h[?25l[17;16H[?12l[?25h[?25l[18;25H[?12l[?25h[?25l[19d[?12l[?25h[?25l[20;28H[?12l[?25h[?25l[21d[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d()[?12l[?25h[?25l[24;14H[?12l[?25h[?25l[25;26H[?12l[?25h[?25l[26d[?12l[?25h[?25l[27;18H[?12l[?25h[?25l[28;26H[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32;14H[?12l[?25h[?25l[33;23H[?12l[?25h[?25l[34;26H[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[36due[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;19H[?12l[?25h[?25l[39;24H[?12l[?25h[?25l[40;14H[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[42;22H[?12l[?25h[?25l[43;26H[?12l[?25h[?25l[44d[?12l[?25h[?25l[45;20H[?12l[?25h[?25l[46;17H[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;16H[?12l[?25h[?25l[49;26H[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59;16H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[26G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hcontents = readFile(sys.argv[1]);[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(parse(contents))[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m readFile[39m(B[m(path):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwith[39m(B[m open(path, (B[0;1m[32m'r'[39m(B[m) (B[0;1m[36mas[39m(B[m file:[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hcontent = file.read()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m content[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1HToken = namedtuple((B[0;1m[32m'Token'[39m(B[m, [(B[0;1m[32m'kind'[39m(B[m, (B[0;1m[32m'lexeme'[39m(B[m])[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m usage[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(f(B[0;1m[32m'usage: {sys.argv[0]} DATA_FILE'[39m(B[m)[59;26H[?12l[?25h[?25l[58;13H[?12l[?25h[?25l[A[?12l[?25h[?25l[56;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[54;19H[?12l[?25h[?25l[53;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[51;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[49;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[46;12H[?12l[?25h[?25l[A[?12l[?25h[?25l[44;18H[?12l[?25h[?25l[43;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[38;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[36;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[27;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[25;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[23;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[Aoken[?12l[?25h[?25l[19;14H[?12l[?25h[?25l[18;24H[?12l[?25h[?25l[17;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[15;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr([?12l[?25h[?25l[A[?12l[?25h[?25l[11;14H[?12l[?25h[?25l[10;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Al[?12l[?25h[?25l[A[?12l[?25h[?25l[6;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[4;26H[?12l[?25h[?25l[3;14H[?12l[?25h[?25l[2;26H[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8M[1;62r[2;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l[3;26H[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d()[?12l[?25h[?25l[7;14H[?12l[?25h[?25l[6;26H[?12l[?25h[?25l[7;14H[?12l[?25h[?25l[8;26H[?12l[?25h[?25l[9d[?12l[?25h[?25l[10;18H[?12l[?25h[?25l[11;26H[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15;14H[?12l[?25h[?25l[16;23H[?12l[?25h[?25l[17;26H[?12l[?25h[?25l[18;23H[?12l[?25h[?25l[19due[?12l[?25h[?25l[20d[?12l[?25h[?25l[21;19H[?12l[?25h[?25l[22;24H[?12l[?25h[?25l[23;14H[?12l[?25h[?25l[24;26H[?12l[?25h[?25l[25;22H[?12l[?25h[?25l[26;26H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;20H[?12l[?25h[?25l[29;17H[?12l[?25h[?25l[30d[?12l[?25h[?25l[31;16H[?12l[?25h[?25l[32;26H[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;16H[?12l[?25h[?25l[43;26H[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;18H[?12l[?25h[?25l[49d[?12l[?25h[?25l[50;12H[?12l[?25h[?25l[51;26H[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55;20H[?12l[?25h[?25l[56;26H[?12l[?25h[?25l[57d[?12l[?25h[?25l[58;19H[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1HToken = namedtuple((B[0;1m[32m'Token'[39m(B[m, [(B[0;1m[32m'kind'[39m(B[m, (B[0;1m[32m'lexeme'[39m(B[m])[59;26H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m usage[39m(B[m():[?12l[?25h[?25l[A[?12l[?25h[?25l[57;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[55;19H[?12l[?25h[?25l[54;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[52;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[50;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[47;12H[?12l[?25h[?25l[A[?12l[?25h[?25l[45;18H[?12l[?25h[?25l[44;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[37;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[26;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[24;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[23;26H[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;20H[?12l[?25h[?25l[26;17H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;16H[?12l[?25h[?25l[29;26H[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39;16H[?12l[?25h[?25l[40;26H[?12l[?25h[?25l[41d[?12l[?25h[?25l[A[?12l[?25h[?25l[39;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[37;26H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l,[?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[31;31H(B[0;1m[32m'[39m(B[m)[K[?12l[?25h[?25l(B[0;1m[32m'[39m(B[m)[K[?12l[?25h[?25l(B[0;1m[32m'[39m(B[m)[K[?12l[?25h[?25l(B[0;1m[32m*'[39m(B[m)[?12l[?25h[?25l(B[0;1m[32m**'[39m(B[m)[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 130 lines ](B[m[32;31H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [6@./calc.py data.txt[C
[?2004lTraceback (most recent call last):
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 130, in <module>
    main()
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 116, in main
    print(parse(contents))
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 85, in parse
    tokens = scan(text)
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 107, in scan
    (match, kind) = next_match(text)
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 96, in next_match
    m = re.compile(r'(**)').match(text)
  File "/usr/lib/python3.9/re.py", line 252, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python3.9/re.py", line 304, in _compile
    p = sre_compile.compile(pattern, flags)
  File "/usr/lib/python3.9/sre_compile.py", line 764, in compile
    p = sre_parse.parse(p, flags)
  File "/usr/lib/python3.9/sre_parse.py", line 948, in parse
    p = _parse_sub(source, state, flags & SRE_FLAG_VERBOSE, 0)
  File "/usr/lib/python3.9/sre_parse.py", line 443, in _parse_sub
    itemsappend(_parse(source, state, verbose, nested + 1,
  File "/usr/lib/python3.9/sre_parse.py", line 834, in _parse
    p = _parse_sub(source, state, sub_verbose, nested + 1)
  File "/usr/lib/python3.9/sre_parse.py", line 443, in _parse_sub
    itemsappend(_parse(source, state, verbose, nested + 1,
  File "/usr/lib/python3.9/sre_parse.py", line 668, in _parse
    raise source.error("nothing to repeat",
re.error: nothing to repeat at position 1
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ clear
[?2004l[H[2J[3J[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ clear./calc.py data.txt 
[?2004lTraceback (most recent call last):
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 130, in <module>
    main()
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 116, in main
    print(parse(contents))
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 85, in parse
    tokens = scan(text)
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 107, in scan
    (match, kind) = next_match(text)
  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 96, in next_match
    m = re.compile(r'(**)').match(text)
  File "/usr/lib/python3.9/re.py", line 252, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python3.9/re.py", line 304, in _compile
    p = sre_compile.compile(pattern, flags)
  File "/usr/lib/python3.9/sre_compile.py", line 764, in compile
    p = sre_parse.parse(p, flags)
  File "/usr/lib/python3.9/sre_parse.py", line 948, in parse
    p = _parse_sub(source, state, flags & SRE_FLAG_VERBOSE, 0)
  File "/usr/lib/python3.9/sre_parse.py", line 443, in _parse_sub
    itemsappend(_parse(source, state, verbose, nested + 1,
  File "/usr/lib/python3.9/sre_parse.py", line 834, in _parse
    p = _parse_sub(source, state, sub_verbose, nested + 1)
  File "/usr/lib/python3.9/sre_parse.py", line 443, in _parse_sub
    itemsappend(_parse(source, state, verbose, nested + 1,
  File "/usr/lib/python3.9/sre_parse.py", line 668, in _parse
    raise source.error("nothing to repeat",
re.error: nothing to repeat at position 1
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt clear[K./calc.py data.txt [6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 130 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term()**term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'(**)'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25l([?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25le[?12l[?25h[?25lc[?12l[?25h[?25lk[?12l[?25h[?25l([?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l([?12l[?25h[?25l[?12l[?25h[?25l([?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25lk[?12l[?25h[?25l([?12l[?25h[?25l[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[27;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[27;20H[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[29;20H[?12l[?25h[?25l[30d[?12l[?25h[?25l[31;18H[?12l[?25h[?25l[32;20H[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36;14H[?12l[?25h[?25l[37;20H[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;19H[?12l[?25h[?25l[43dt[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[40;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[40;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[36;14H[?12l[?25h[?25l[35;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[29;20H[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[27;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l([?12l[?25h[?25l[C[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[29;22H[?12l[?25h[?25l[30d[?12l[?25h[?25l[31;18H[?12l[?25h[?25l[32;22H[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36;14H[?12l[?25h[?25l[37;22H[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42;19H[?12l[?25h[?25l[43;22H[?12l[?25h[?25l[44;14H[?12l[?25h[?25l[45;22H[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50;17H[?12l[?25h[?25l[51d[?12l[?25h[?25l[52;16H[?12l[?25h[?25l[53;22H[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[59;22H[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l[A[?12l[?25h[?25l[57;18H[?12l[?25h[?25l[Axt[l[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[51;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[49;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25le[?12l[?25h[?25l([?12l[?25h[?25lr[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[42;26H[1P[?12l[?25h[?25l(B[0;1m[32m\**)'[39m(B[m).match(text)[42;27H[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[1P[?12l[?25h[?25l'\**\').match(text)[42;30H[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[42;30H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l'[?12l[?25h[?25l)[?12l[?25h[?25l.[?12l[?25h[?25lm[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25lr[?12l[?25h[?25l'[?12l[?25h[?25l\[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l\[?12l[?25h[?25l[?12l[?25h[?25l\[?12l[?25h[?25l[?12l[?25h[?25l\[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l'[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25lr[?12l[?25h[?25le[?12l[?25h[?25l[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25lm[?12l[?25h[?25lp[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25l([?12l[?25h[?25lr[?12l[?25h[?25l'[?12l[?25h[?25l\[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l'[?12l[?25h[?25l)[?12l[?25h[?25l.[?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l([?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lm[?12l[?25h[?25l [?12l[?25h[?25l=[?12l[?25h[?25l [?12l[?25h[?25lr[?12l[?25h[?25le[?12l[?25h[?25l.[?12l[?25h[?25lc[?12l[?25h[?25lo[?12l[?25h[?25lm[?12l[?25h[?25lp[?12l[?25h[?25li[?12l[?25h[?25ll[?12l[?25h[?25le[?12l[?25h[?25l([?12l[?25h[?25lr[?12l[?25h[?25l'[?12l[?25h[?25l\[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l'[?12l[?25h[?25l)[?12l[?25h[?25l.[?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l'[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l\[?12l[?25h[?25l[43d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[A[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[38;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[36;32H[?12l[?25h[?25l[35;27H[?12l[?25h[?25l[34;22H[?12l[?25h[?25l[33;28H[?12l[?25h[?25l[32;14H[?12l[?25h[?25l[31;24H[?12l[?25h[?25l[30;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[28;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[24;14H[?12l[?25h[?25l[23;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[21;32H[?12l[?25h[?25l[20;27H[?12l[?25h[?25l[19;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[17;28H[?12l[?25h[?25l[16;14H[?12l[?25h[?25l[15;32H[?12l[?25h[?25l[14;24H[?12l[?25h[?25l[15;32H[?12l[?25h[?25l[16;14H[?12l[?25h[?25l[17;28H[?12l[?25h[?25l[18d[?12l[?25h[?25l[19;18H[?12l[?25h[?25l[20;27H[?12l[?25h[?25l[21;32H[?12l[?25h[?25l[22;25H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24;14H[?12l[?25h[?25l[25;23H[?12l[?25h[?25l[26;27H[?12l[?25h[?25l[27;23H[?12l[?25h[?25l[28due[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;19H[?12l[?25h[?25l[31;24H[?12l[?25h[?25l[32;14H[?12l[?25h[?25l[33;28H[?12l[?25h[?25l[34;22H[?12l[?25h[?25l[35;27H[?12l[?25h[?25l[36;32H[?12l[?25h[?25l[37;20H[?12l[?25h[?25l[38;17H[?12l[?25h[?25l[39d[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[42;32H[?12l[?25h[?25l[43d[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l*[?12l[?25h[?25l\*\').match(text)[42;29H[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l\\*\').match(text)[42;30H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[42d\[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[A[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[45d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l\[?12l[?25h[?25l[?12l[?25h[?25l\[?12l[?25h[?25l[1P\[?12l[?25h[?25l*[?12l[?25h[?25l\[?12l[?25h[?25l[25G(B[0;1m[32m'\*\*'[39m(B[m[1P[?12l[?25h[?25l[A[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[42;30H[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[41;26H[?12l[?25h[?25l[42;30H[?12l[?25h[?25l[A[?12l[?25h[?25l[40;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[38;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[36;30H[?12l[?25h[?25l[A[?12l[?25h[?25l[34;22H[?12l[?25h[?25l[33;28H[?12l[?25h[?25l[32;14H[?12l[?25h[?25l[31;24H[?12l[?25h[?25l[30;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[28;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[24;14H[?12l[?25h[?25l[23;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[21;30H[?12l[?25h[?25l[A[?12l[?25h[?25l[19;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[17;28H[?12l[?25h[?25l[16;14H[?12l[?25h[?25l[15;30H[?12l[?25h[?25l[14;24H[?12l[?25h[?25l[13;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[13d[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 130 lines ](B[m[13;28H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [6@./calc.py data.txt[C
[?2004l[0, 3]
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py data.txt [C[C[1P [1P [1P [1P [1P [1P [1P [1P e xpn-data.txt 
[?2004lexpecting ; at **
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [5P[C[C[C[C[C[C[C[C[C[5@expn-[C[C[C[C[C[C[C[C[C[K./calc.py expn-data.txt [5P[C[C[C[C[C[C[C[C[C[6Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 130 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term()**term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25lm[?12l[?25h[?25la[?12l[?25h[?25lt[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35;16H[?12l[?25h[?25l[36d()[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44;16H[?12l[?25h[?25l[45dck[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[53d[?12l[?25h[?25l[54;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[50;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[50;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[50d[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[53d[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[50;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[50d[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[53d[?12l[?25h[?25l[52;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[50;18H[?12l[?25h[?25l[C[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[52;19H[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[50;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51;14H[?12l[?25h[?25l[50;20H[?12l[?25h[?25lt[?12l[?25h[?25l[?12l[?25h[?25lt[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[50d[?12l[?25h[?25l[49;24H[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;24r[?12l[?25h[39;49m(B[m[4l[?7h[H[2J(B[0;7m  GNU nano 5.4                                           calc.py                [2;1H(B[0;1m[32m  : INT[3d  | '(' expr ')'[4d  ;[5d"""[7d[31m#use nested function for encapsulation.[8d[36mdef[34m parse[39m(B[m(text):[10;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[11;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[12;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[13;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[14;13Hlookahead = nextToken()[15;9H(B[0;1m[36melse[39m(B[m:[16dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[17;19Hfile=sys.stderr)[18;13Hsys.exit(1)[19;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[20;9H(B[0;1m[36mnonlocal[39m(B[m index[21;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[22;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[23;9H(B[0;1m[36melse[39m(B[m:[24dtok = tokens[index][24;24H[?2004h[?1h=[?1h=[22d[J[1;40H(B[0;7mcalc.py[1;58H       [79G(B[m[2;8H[1K (B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[3;12H[1K values.append(expr())[4;12H[1K match((B[0;1m[32m';'[39m(B[m)[5;8H[1K (B[0;1m[36mreturn[39m(B[m values[7d    (B[0;1m[36mdef[34m expr[39m(B[m():[K[8;7H[1K t = term()[9;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[10;10H[1K kind = lookahead.kind[K[11;10H[1K match(kind)[12;9H  t1 = term()[K[13;9H  t += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[14;8H(B[0;1m[36mreturn[39m(B[m t[K[15d[K[16;5H(B[0;1m[36mdef[34m term[39m(B[m():[K[17;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[K[18;13Hmatch((B[0;1m[32m'-'[39m(B[m)[K[19;12H[1K (B[0;1m[36mreturn[39m(B[m - term()[20;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[21;9H    match((B[0;1m[32m'**'[39m(B[m)[K[23d(B[0;7m^G(B[m Help[14G(B[0;7m^O(B[m Write Out (B[0;7m^W(B[m Where Is  (B[0;7m^K(B[m Cut[53G(B[0;7m^T(B[m Execute   (B[0;7m^C(B[m Location[24d(B[0;7m^X(B[m Exit[14G(B[0;7m^R(B[m Read File (B[0;7m^\(B[m Replace   (B[0;7m^U(B[m Paste     (B[0;7m^J(B[m Justify   (B[0;7m^_(B[m Go To Line[?25l[21;24H[?12l[?25h[?25l[?12l[?25h[24;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;62r[?12l[?25h[39;49m(B[m[4l[?7h[H[2J(B[0;7m  GNU nano 5.4                         calc.py                                  [2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[3;13Hvalues.append(expr())[4;13Hmatch((B[0;1m[32m';'[39m(B[m)[5;9H(B[0;1m[36mreturn[39m(B[m values[7;5H(B[0;1m[36mdef[34m expr[39m(B[m():[8;8Ht = term()[9;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[10;11Hkind = lookahead.kind[11;11Hmatch(kind)[12;11Ht1 = term()[13;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[14;8H(B[0;1m[36mreturn[39m(B[m t[16;5H(B[0;1m[36mdef[34m term[39m(B[m():[17;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[18;13Hmatch((B[0;1m[32m'-'[39m(B[m)[19;13H(B[0;1m[36mreturn[39m(B[m - term()[20;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[21;13Hmatch((B[0;1m[32m'**'[39m(B[m)[23d(B[0;7m^G(B[m Help[14G(B[0;7m^O(B[m Write Out (B[0;7m^W(B[m Where Is  (B[0;7m^K(B[m Cut[53G(B[0;7m^T(B[m Execute   (B[0;7m^C(B[m Location[24d(B[0;7m^X(B[m Exit[14G(B[0;7m^R(B[m Read File (B[0;7m^\(B[m Replace   (B[0;7m^U(B[m Paste     (B[0;7m^J(B[m Justify   (B[0;7m^_(B[m Go To Line[21;24H[?2004h[?1h=[?1h=[1;40H(B[0;7m       [1;58Hcalc.py[1;81H                                     [1;116H(B[m[22;13H(B[0;1m[36mreturn[39m(B[m term()**term()[23;8H[1K (B[0;1m[36melse[39m(B[m:[K[24d[1K (B[0;1m[36mreturn[39m(B[m factor()[K[26;5H(B[0;1m[36mdef[34m factor[39m(B[m():[27;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[28;13Hvalue = int(lookahead.lexeme)[29;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[30;13H(B[0;1m[36mreturn[39m(B[m value[31;9H(B[0;1m[36melse[39m(B[m:[32dmatch((B[0;1m[32m'('[39m(B[m)[33;13Hvalue = expr()[34;13Hmatch((B[0;1m[32m')'[39m(B[m)[35;13H(B[0;1m[36mreturn[39m(B[m value[37;4H(B[0;1m[31m #begin parse()[38;5H[39m(B[mtokens = scan(text)[39;5Hindex = 0[40;5Hlookahead = nextToken()[41;5Hvalue = program()[42;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[43;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[44;9Hsys.exit(1)[45;5H(B[0;1m[36mreturn[39m(B[m value[47d(B[0;1m[36mdef[34m scan[39m(B[m(text):[48;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[49;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[50;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[51;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[52;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[53;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[54;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[55;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[56;9H[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[58;5Htokens = [][59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[?25l[21;24H[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;24r[?12l[?25h[39;49m(B[m[4l[?7h[H[2J(B[0;7m  GNU nano 5.4                                           calc.py                [2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[3;13Hvalues.append(expr())[4;13Hmatch((B[0;1m[32m';'[39m(B[m)[5;9H(B[0;1m[36mreturn[39m(B[m values[7;5H(B[0;1m[36mdef[34m expr[39m(B[m():[8;8Ht = term()[9;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[10;11Hkind = lookahead.kind[11;11Hmatch(kind)[12;11Ht1 = term()[13;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[14;8H(B[0;1m[36mreturn[39m(B[m t[16;5H(B[0;1m[36mdef[34m term[39m(B[m():[17;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[18;13Hmatch((B[0;1m[32m'-'[39m(B[m)[19;13H(B[0;1m[36mreturn[39m(B[m - term()[20;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[21;13Hmatch((B[0;1m[32m'**'[39m(B[m)[22;13H(B[0;1m[36mreturn[39m(B[m term()**term()[23;9H(B[0;1m[36melse[39m(B[m:[24d(B[0;1m[36mreturn[39m(B[m factor()[19;24H[?2004h[?1h=[?1h=[22d[J[1;40H(B[0;7mcalc.py[1;58H       [79G(B[m[23d(B[0;7m^G(B[m Help[14G(B[0;7m^O(B[m Write Out (B[0;7m^W(B[m Where Is  (B[0;7m^K(B[m Cut[53G(B[0;7m^T(B[m Execute   (B[0;7m^C(B[m Location[24d(B[0;7m^X(B[m Exit[14G(B[0;7m^R(B[m Read File (B[0;7m^\(B[m Replace   (B[0;7m^U(B[m Paste     (B[0;7m^J(B[m Justify   (B[0;7m^_(B[m Go To Line[?25l[19;24H[?12l[?25h[?25l[?12l[?25h[24;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;63r[?12l[?25h[39;49m(B[m[4l[?7h[H[2J(B[0;7m  GNU nano 5.4                         calc.py                                  [2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[3;13Hvalues.append(expr())[4;13Hmatch((B[0;1m[32m';'[39m(B[m)[5;9H(B[0;1m[36mreturn[39m(B[m values[7;5H(B[0;1m[36mdef[34m expr[39m(B[m():[8;8Ht = term()[9;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[10;11Hkind = lookahead.kind[11;11Hmatch(kind)[12;11Ht1 = term()[13;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[14;8H(B[0;1m[36mreturn[39m(B[m t[16;5H(B[0;1m[36mdef[34m term[39m(B[m():[17;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[18;13Hmatch((B[0;1m[32m'-'[39m(B[m)[19;13H(B[0;1m[36mreturn[39m(B[m - term()[20;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[21;13Hmatch((B[0;1m[32m'**'[39m(B[m)[23d(B[0;7m^G(B[m Help[14G(B[0;7m^O(B[m Write Out (B[0;7m^W(B[m Where Is  (B[0;7m^K(B[m Cut[53G(B[0;7m^T(B[m Execute   (B[0;7m^C(B[m Location[24d(B[0;7m^X(B[m Exit[14G(B[0;7m^R(B[m Read File (B[0;7m^\(B[m Replace   (B[0;7m^U(B[m Paste     (B[0;7m^J(B[m Justify   (B[0;7m^_(B[m Go To Line[19;24H[?2004h[?1h=[?1h=[1;40H(B[0;7m       [1;81H                                     calc.py                                                                                                                 [1;236H(B[m[22;13H(B[0;1m[36mreturn[39m(B[m term()**term()[23;8H[1K (B[0;1m[36melse[39m(B[m:[K[24d[1K (B[0;1m[36mreturn[39m(B[m factor()[K[26;5H(B[0;1m[36mdef[34m factor[39m(B[m():[27;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[28;13Hvalue = int(lookahead.lexeme)[29;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[30;13H(B[0;1m[36mreturn[39m(B[m value[31;9H(B[0;1m[36melse[39m(B[m:[32dmatch((B[0;1m[32m'('[39m(B[m)[33;13Hvalue = expr()[34;13Hmatch((B[0;1m[32m')'[39m(B[m)[35;13H(B[0;1m[36mreturn[39m(B[m value[37;4H(B[0;1m[31m #begin parse()[38;5H[39m(B[mtokens = scan(text)[39;5Hindex = 0[40;5Hlookahead = nextToken()[41;5Hvalue = program()[42;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[43;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[44;9Hsys.exit(1)[45;5H(B[0;1m[36mreturn[39m(B[m value[47d(B[0;1m[36mdef[34m scan[39m(B[m(text):[48;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[49;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[50;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[51;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[52;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[53;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[54;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[55;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[56;9H[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[58;5Htokens = [][59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[60;9H(match, kind) = next_match(text)[62d(B[0;7m^G(B[m Help[62;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^W(B[m Where Is[55G(B[0;7m^K(B[m Cut[62;73H(B[0;7m^T(B[m Execute[62;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[62;127H(B[0;7mM-A(B[m Set Mark[145G(B[0;7mM-](B[m To Bracket    (B[0;7mM-Q(B[m Previous[181G(B[0;7m^B(B[m Back[62;199H(B[0;7m^◀(B[m Prev Word[217G(B[0;7m^A(B[m Home[63d(B[0;7m^X(B[m Exit[63;19H(B[0;7m^R(B[m Read File[37G(B[0;7m^\(B[m Replace[63;55H(B[0;7m^U(B[m Paste[63;73H(B[0;7m^J(B[m Justify[63;91H(B[0;7m^_(B[m Go To Line     (B[0;7mM-E(B[m Redo[63;127H(B[0;7mM-6(B[m Copy[63;145H(B[0;7m^Q(B[m Where Was[163G(B[0;7mM-W(B[m Next[63;181H(B[0;7m^F(B[m Forward[63;199H(B[0;7m^▶(B[m Next Word[217G(B[0;7m^E(B[m End[?25l[19;24H[?12l[?25h[?25l[?12l[?25h[63;1H[?1049l[23;0;0t[?1l>[?1049h[22;0;0t[1;62r[?12l[?25h[39;49m(B[m[4l[?7h[H[2J(B[0;7m  GNU nano 5.4                                                                                                       [2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[3;13Hvalues.append(expr())[4;13Hmatch((B[0;1m[32m';'[39m(B[m)[5;9H(B[0;1m[36mreturn[39m(B[m values[7;5H(B[0;1m[36mdef[34m expr[39m(B[m():[8;8Ht = term()[9;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[10;11Hkind = lookahead.kind[11;11Hmatch(kind)[12;11Ht1 = term()[13;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[14;8H(B[0;1m[36mreturn[39m(B[m t[16;5H(B[0;1m[36mdef[34m term[39m(B[m():[17;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[18;13Hmatch((B[0;1m[32m'-'[39m(B[m)[19;13H(B[0;1m[36mreturn[39m(B[m - term()[20;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[21;13Hmatch((B[0;1m[32m'**'[39m(B[m)[22;13H(B[0;1m[36mreturn[39m(B[m term()**term()[23;9H(B[0;1m[36melse[39m(B[m:[24d(B[0;1m[36mreturn[39m(B[m factor()[26;5H(B[0;1m[36mdef[34m factor[39m(B[m():[27;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[28;13Hvalue = int(lookahead.lexeme)[29;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[30;13H(B[0;1m[36mreturn[39m(B[m value[31;9H(B[0;1m[36melse[39m(B[m:[32dmatch((B[0;1m[32m'('[39m(B[m)[33;13Hvalue = expr()[34;13Hmatch((B[0;1m[32m')'[39m(B[m)[35;13H(B[0;1m[36mreturn[39m(B[m value[37;4H(B[0;1m[31m #begin parse()[38;5H[39m(B[mtokens = scan(text)[39;5Hindex = 0[40;5Hlookahead = nextToken()[41;5Hvalue = program()[42;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[43;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[44;9Hsys.exit(1)[45;5H(B[0;1m[36mreturn[39m(B[m value[47d(B[0;1m[36mdef[34m scan[39m(B[m(text):[48;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[49;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[50;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[51;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[52;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[53;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[54;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[55;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[56;9H[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[58;5Htokens = [][59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[60;9H(match, kind) = next_match(text)[62d(B[0;7m^G(B[m Help[62;19H(B[0;7m^O(B[m Write Out[37G(B[0;7m^W(B[m Where Is[55G(B[0;7m^K(B[m Cut[62;73H(B[0;7m^T(B[m Execute[62;91H(B[0;7m^C(B[m Location[109G(B[0;7mM-U(B[m Undo[19;24H[?2004h[?1h=[?1h=[60d[J[1;58H(B[0;7mcalc.py[116G(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[?25l[19;24H[?12l[?25h[?25l[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23;14H[?12l[?25h[?25l[22;24H[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25lt[?12l[?25h[?25l[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[22;28H(term()[29G[?12l[?25h[?25l[1P[?12l[?25h[?25l(term()[29G[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l))**(term())[22;27H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l(term())**(term())[22;21H[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 130 lines ](B[m[22;21H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C
[?2004lexpecting ; at **
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 130 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[A[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m (term())**(term())[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mexpr[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | #empty[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : expr ';' program[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mprogram[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[36mimport[39m(B[m sys[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mimport[39m(B[m re[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[13d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[14;4H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[13;45H[?12l[?25h[?25l[14;4H[?12l[?25h[?25l[15;5H[?12l[?25h[?25l[16;13H[?12l[?25h[?25l[17d[?12l[?25h[?25l[18;4H[?12l[?25h[?25l[19;7H[?12l[?25h[?25l[20;8H[?12l[?25h[?25l[21;17H[?12l[?25h[?25l[22;4H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;40H[?12l[?25h[?25l[26;17H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;45H[?12l[?25h[?25l[29;21H[?12l[?25h[?25l[30;27H[?12l[?25h[?25l[31;37H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[34;45H[?12l[?25h[?25l[35;35H[?12l[?25h[?25l[36;24H[?12l[?25h[?25l[37;21H[?12l[?25h[?25l[38dex[?12l[?25h[?25l[39;35H[?12l[?25h[?25l[40;41H[?12l[?25h[?25l[41;14H[?12l[?25h[?25l[42;32H[?12l[?25h[?25l[43;23H[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46;19H[?12l[?25h[?25l[47d][?12l[?25h[?25l[48;34H[?12l[?25h[?25l[49d[?12l[?25h[?25l[50;23H[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53;16H[?12l[?25h[?25l[54d()[?12l[?25h[?25l[55;43H[?12l[?25h[?25l[56;32H[?12l[?25h[?25l[57;22H[?12l[?25h[?25l[58d[?12l[?25h[?25l[59;45H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m (term())**(term())[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l[58;22H[?12l[?25h[?25l[57;28H[?12l[?25h[?25l[56;14H[?12l[?25h[?25l[55;24H[?12l[?25h[?25l[54;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[52;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[48;14H[?12l[?25h[?25l[47;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;14H[?12l[?25h[?25l[49;23H[?12l[?25h[?25l[50;27H[?12l[?25h[?25l[51;23H[?12l[?25h[?25l[52due[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[48;14H[?12l[?25h[?25l[47;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[45;42H[?12l[?25h[?25l[44;27H[?12l[?25h[?25l[43;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[41;28H[?12l[?25h[?25l[40;14H[?12l[?25h[?25l[39;38H[?12l[?25h[?25l[38;24H[?12l[?25h[?25l[37;28H[?12l[?25h[?25l[38;24H[?12l[?25h[?25l[39;38H[?12l[?25h[?25l[40;14H[?12l[?25h[?25l[39;38H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l[38;24H[?12l[?25h[?25l[37;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[A):[?12l[?25h[?25l[35d[?12l[?25h[?25l[36;28H[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;24H[?12l[?25h[?25l[39;36H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l)[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[39;26H[1P)[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l **(term())[39;28H[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l([?12l[?25h[?25l[1P[?12l[?25h[?25l term())[31G[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l[A[?12l[?25h[?25l[37;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[A):[?12l[?25h[?25l[33;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[31;16H[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch:                                                                                                              [60;9H(B[m[?12l[?25h[?25l(B[0;7mm(B[m[?12l[?25h[?25l(B[0;7ma(B[m[?12l[?25h[?25l(B[0;7mt(B[m[?12l[?25h[?25l(B[0;7mc(B[m[?12l[?25h[?25l(B[0;7mh(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[35;13H[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch [match]:                                                                                                      [60;17H(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[38;13H[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch [match]:                                                                                                      [60;17H(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[46;13H[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch [match]:                                                                                                      [60;17H(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[49;13H[?12l[?25h[?25l1match((B[0;1m[32m'('[39m(B[m)[49;14H[?12l[?25h[?25l[1P[?12l[?25h[?25l[61;17H             (B[0;7m^W(B[m Begin of Paragr.          (B[0;7m^Y(B[m First Line   [81G       (B[0;7m^T(B[m Go To Text[K[62;2H(B[0;7mC(B[m Cancel[17G             (B[0;7m^O(B[m End of Paragraph          (B[0;7m^V(B[m Last Line[K[61;101H[A(B[0;7mEnter line number, column number:                                                                                    [60;35H(B[m[?12l[?25h[?25l(B[0;7m1(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Paste        (B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[39m(B[m[K[3d[K[4d(B[0;1m[36mimport[39m(B[m re[K[5d(B[0;1m[36mimport[39m(B[m sys[K[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[7d[K[8d[K[9d(B[0;1m[32m"""[39m(B[m[K[10d(B[0;1m[32mprogram[39m(B[m[K[11d(B[0;1m[32m  : expr ';' program[39m(B[m[K[12d(B[0;1m[32m  | #empty[39m(B[m[K[13d(B[0;1m[32m  ;[39m(B[m[K[14d(B[0;1m[32mexpr[39m(B[m[K[15d(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[39m(B[m[K[18d(B[0;1m[32m  : '-' term[39m(B[m[K[19d(B[0;1m[32m  | factor[39m(B[m[K[20d(B[0;1m[32m  ;[39m(B[m[K[21d(B[0;1m[32mfactor[39m(B[m[K[22d(B[0;1m[32m  : INT[39m(B[m[K[23d(B[0;1m[32m  | '(' expr ')'[24d  ;[39m(B[m[K[25d(B[0;1m[32m"""[39m(B[m[K[26d[K[27d(B[0;1m[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[K[29d[K[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;5H    (B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;9H    lookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[K[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;18H[1K file=sys.stderr)[38;13Hsys.exit(1[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[K[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;5H    (B[0;1m[36melse[39m(B[m:[K[44;9H    tok = tokens[index][45;13Hindex += 1[K[46;13H(B[0;1m[36mreturn[39m(B[m tok[K[47d[K[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][K[50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[K[53;9H(B[0;1m[36mreturn[39m(B[m values[54d[K[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[K[56;5H   t = term()[57;5H   (B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;10H[1K kind = lookahead.kind[59;10H[1K match(kind)[K[2;13H[?12l[?25h[?25l[61;17H       (B[0;7mM-C(B[m Case Sens          (B[0;7mM-B(B[m Backwards          (B[0;7m^P(B[m Older[15X[61;93H(B[0;7m^T(B[m Go To Line[62;2H(B[0;7mC(B[m Cancel[17G       (B[0;7mM-R(B[m Reg.exp.           (B[0;7m^R(B[m Replac[62;65H     (B[0;7m^N(B[m Newer[K[61;106H[A(B[0;7mSearch [match]:                                                                                                      [60;17H(B[m[?12l[?25h[?25l(B[0;7mm(B[m[?12l[?25h[?25l(B[0;7ma(B[m[?12l[?25h[?25l(B[0;7mt(B[m[?12l[?25h[?25l(B[0;7mc(B[m[?12l[?25h[?25l(B[0;7mh(B[m[?12l[?25h[?25l[K[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut          (B[0;7m^T(B[m Execute      (B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[K[62;2H(B[0;7mX(B[m Exit  [17G(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace      (B[0;7m^U(B[m Past[62;65H(B[0;7m^J(B[m Justify      (B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[31;9H[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;9H[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55;9H[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m (term() ** term())[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[59;9H[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[9G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[59;9H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[59;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[50;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[40;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[29;9H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[25d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25l([?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[C[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l[26d[?12l[?25h[?25l[?12l[?25h[?25lc[?12l[?25h[?25lh[?12l[?25h[?25l([?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[29;23H[?12l[?25h[?25l[30d[?12l[?25h[?25l[31;18H[?12l[?25h[?25l[32;23H[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36;14H[?12l[?25h[?25l[37;23H[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[40;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[40;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[40d[?12l[?25h[?25l[A[?12l[?25h[?25l[40d[?12l[?25h[?25l[A[?12l[?25h[?25l[40d[?12l[?25h[?25l[A[?12l[?25h[?25l[40d[?12l[?25h[?25l[A[?12l[?25h[?25l[40d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[36;14H[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[29;23H[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[27;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[27d[?12l[?25h[?25l[A[?12l[?25h[?25l)[?12l[?25h[?25l[27d[?12l[?25h[?25l[26;24H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;14H[?12l[?25h[?25l[27;24H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l([?12l[?25h[?25l[1P[?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l [?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l)[?12l[?25h[?25l[28d[?12l[?25h[?25l[27;37H[?12l[?25h[?25l [?12l[?25h[?25l[26;24H[?12l[?25h[?25l[25;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[23;23H[?12l[?25h[?25l[A):[?12l[?25h[?25l[21;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[19;16H[?12l[?25h[?25l[18;36H[?12l[?25h[?25l[17;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[15;32H[?12l[?25h[?25l[Aeck([?12l[?25h[?25l[13;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[10;22H[?12l[?25h[?25l[A)[?12l[?25h[?25l[8;34H[?12l[?25h[?25l[A[?12l[?25h[?25l[6;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[3;23H[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Htok = tokens[index][?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;59r8M[1;62r[2;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[36G[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m index[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hsys.exit(1)[?12l[?25h[?25l7[2;59r8M[1;62r[2;19Hfile=sys.stderr)[?12l[?25h[?25l7[2;60r8M[1;62r[2;13Hprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[2;36H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hlookahead = nextToken()[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[2;36H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mdef[34m parse[39m(B[m(text):[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[31m#use nested function for encapsulation.[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | '(' expr ')'[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : INT[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mfactor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | factor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : '-' term[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mterm[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[2;36H[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mexpr[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | #empty[39m(B[m[?12l[?25h[?25l[3;4H[?12l[?25h[?25l[4;5H[?12l[?25h[?25l[5;36H[?12l[?25h[?25l[6;4H[?12l[?25h[?25l[7;5H[?12l[?25h[?25l[8;13H[?12l[?25h[?25l[9d[?12l[?25h[?25l[10;4H[?12l[?25h[?25l[11;7H[?12l[?25h[?25l[12;8H[?12l[?25h[?25l[13;17H[?12l[?25h[?25l[14;4H[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17;36H[?12l[?25h[?25l[18;17H[?12l[?25h[?25l[19d[?12l[?25h[?25l[20;36H[?12l[?25h[?25l[21;21H[?12l[?25h[?25l[22;27H[?12l[?25h[?25l[23;36H[?12l[?25h[?25l[22;27H[?12l[?25h[?25l[23;36H[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[26;36H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28;24H[?12l[?25h[?25l[29;21H[?12l[?25h[?25l[30dex[?12l[?25h[?25l[31;35H[?12l[?25h[?25l[32;36H[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[34;32H[?12l[?25h[?25l[35;23H[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;19H[?12l[?25h[?25l[39d][?12l[?25h[?25l[40;34H[?12l[?25h[?25l[41d[?12l[?25h[?25l[A[?12l[?25h[?25l[39;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[36;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[34;32H[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[32;36H[?12l[?25h[?25l[A[?12l[?25h[?25l[30;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[27;35H[?12l[?25h[?25l[A[C[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[24;36H[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[24;36H[?12l[?25h[?25l[A[?12l[?25h[?25l[22;27H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[23d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[22dk[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[26;22H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30de[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[34;22H[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;19H[?12l[?25h[?25l[39d][?12l[?25h[?25l[40dch[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45;16H[?12l[?25h[?25l[46d()[?12l[?25h[?25l[47;22H[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52;16H[?12l[?25h[?25l[53d[?12l[?25h[?25l[54;16H[?12l[?25h[?25l[55;22H[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term() ** term()[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l[58;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[54;14H[?12l[?25h[?25l[53;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[50;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[46;14H[?12l[?25h[?25l[45;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39;22H[?12l[?25h[?25l[38;14H[?12l[?25h[?25l[37;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[29;16H[?12l[?25h[?25l[28;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[20;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[13;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[10;14H[?12l[?25h[?25l[9;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A([?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[2;14H[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hlookahead = nextToken()[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[22G[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mdef[34m parse[39m(B[m(text):[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[31m#use nested function for encapsulation.[2;22H[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | '(' expr ')'[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : INT[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mfactor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | factor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : '-' term[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mterm[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[2;22H[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mexpr[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | #empty[39m(B[m[?12l[?25h[?25l[3;4H[?12l[?25h[?25l[4;5H[?12l[?25h[?25l[5;22H[?12l[?25h[?25l[6;4H[?12l[?25h[?25l[7;5H[?12l[?25h[?25l[8;13H[?12l[?25h[?25l[9d[?12l[?25h[?25l[10;4H[?12l[?25h[?25l[11;7H[?12l[?25h[?25l[12;8H[?12l[?25h[?25l[13;17H[?12l[?25h[?25l[14;4H[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17;22H[?12l[?25h[?25l[18;17H[?12l[?25h[?25l[19d[?12l[?25h[?25l[20;22H[?12l[?25h[?25l[21d[?12l[?25h[?25l[22dk[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25;14H[?12l[?25h[?25l[26;22H[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30de[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[34;22H[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;19H[?12l[?25h[?25l[39d][?12l[?25h[?25l[40dch[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45;16H[?12l[?25h[?25l[46d()[?12l[?25h[?25l[47;22H[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52;16H[?12l[?25h[?25l[53d[?12l[?25h[?25l[54;16H[?12l[?25h[?25l[55;22H[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term() ** term()[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[59;22H[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hcontents = readFile(sys.argv[1]);[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(parse(contents))[22G[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m readFile[39m(B[m(path):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwith[39m(B[m open(path, (B[0;1m[32m'r'[39m(B[m) (B[0;1m[36mas[39m(B[m file:[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hcontent = file.read()[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m content[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1HToken = namedtuple((B[0;1m[32m'Token'[39m(B[m, [(B[0;1m[32m'kind'[39m(B[m, (B[0;1m[32m'lexeme'[39m(B[m])[59;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[57;19H[?12l[?25h[?25l[Afil[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[52;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[49;12H[?12l[?25h[?25l[A[?12l[?25h[?25l[47;18H[?12l[?25h[?25l[Axt[l[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[39;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[30;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[28;17H[?12l[?25h[?25l[A(1)[?12l[?25h[?25l[26;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[22;14H[?12l[?25h[?25l[21;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[18;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[14;14H[?12l[?25h[?25l[13;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[7;22H[?12l[?25h[?25l[6;14H[?12l[?25h[?25l[5;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[2;22H[?12l[?25h[?25l7[2;60r8M[1;62r[2;11Ht1 = term()[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Hmatch(kind)[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Hkind = lookahead.kind[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;8Ht = term()[?12l[?25h[?25l7[2;60r8M[1;62r[2;5H(B[0;1m[36mdef[34m expr[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mreturn[39m(B[m values[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hmatch((B[0;1m[32m';'[39m(B[m)[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hvalues.append(expr())[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9Hvalues = [][?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m program[39m(B[m():[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;13H(B[0;1m[36mreturn[39m(B[m tok[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hindex += 1[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Htok = tokens[index][2;22H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;59r8M[1;62r[2;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[2;22H[?12l[?25h[?25l[3;14H[?12l[?25h[?25l[4;22H[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8;19H[?12l[?25h[?25l[9d][?12l[?25h[?25l[10dch[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15;16H[?12l[?25h[?25l[16d()[?12l[?25h[?25l[17;22H[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22;16H[?12l[?25h[?25l[23d[?12l[?25h[?25l[24;16H[?12l[?25h[?25l[25;22H[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31;14H[?12l[?25h[?25l[30;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l)[?12l[?25h[?25l)[?12l[?25h[?25l:[?12l[?25h[?25l7[29;59r8[29dM[1;62r[29;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[16G[42m[1K [49m(B[m[?12l[?25h[?25l[29;9H[K[?12l[?25h[?25l[K[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l[1K t[?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l1[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l [?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l =[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[30;24H[?12l[?25h[?25l[31;27H[?12l[?25h[?25l[A[?12l[?25h[?25l7[31;59r8[31dM[1;62r[31;1H[?12l[?25h[?25l[8G[42m[1K [49m(B[m[?12l[?25h[?25l[16G[42m[1K [49m(B[m[?12l[?25h[?25l[1K t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l2[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l =[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[8P[31;9H[?12l[?25h[?25l[8P[?12l[?25h[?25l term2 = term() [?12l[?25h[?25l  term2 = term()  [?12l[?25h[?25l   term2 = term()   [?12l[?25h[?25l    term2 = term()[5G[?12l[?25h[?25l     term2 = term()[6G[?12l[?25h[?25l      term2 = term()[7G[?12l[?25h[?25l[7G term2 = term()[8G[?12l[?25h[?25l[8G term2 = term()[31;9H[?12l[?25h[?25l[31;9H term2 = term()[31;10H[?12l[?25h[?25l[31;10H term2 = term()[31;11H[?12l[?25h[?25l[31;11H term2 = term()[31;12H[?12l[?25h[?25l[31;12H term2 = term()[31;13H[?12l[?25h[?25lt[?12l[?25h[?25l[32d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l1 ** term()[32;25H[?12l[?25h[?25l [?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[33d[?12l[?25h[?25l[32;35H[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l2[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 132 lines ](B[m[32;34H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C
[?2004lexpecting ; at **
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 132 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hterm1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hterm2 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term1 ** term2[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[39;25H[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[36;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[34;24H[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[32;24H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[A[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33;14H[?12l[?25h[?25l[32;24H[?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25l*[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[Am()[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A):[?12l[?25h[?25l[24;16H[?12l[?25h[?25l[A[?12l[?25h[?25l[22;16H[?12l[?25h[?25l[21;27H[?12l[?25h[?25l[20;22H[?12l[?25h[?25l[A[?12l[?25h[?25l[18;27H[?12l[?25h[?25l[A[?12l[?25h[?25l[16;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[13;22H[?12l[?25h[?25l[A)[?12l[?25h[?25l[Aend([?12l[?25h[?25l[A[?12l[?25h[?25l[9;20H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[6;23H[?12l[?25h[?25l[A[?12l[?25h[?25l[Ans[i[?12l[?25h[?25l[3;14H[?12l[?25h[?25l[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m index[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[?12l[?25h[?25l7[2;60r8M[1;62r[2;13Hsys.exit(1)[?12l[?25h[?25l7[2;59r8M[1;62r[2;19Hfile=sys.stderr)[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hlookahead = nextToken()[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[2;27H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[36mdef[34m parse[39m(B[m(text):[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[31m#use nested function for encapsulation.[2;27H[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l[3d[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | '(' expr ')'[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : INT[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mfactor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | factor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : '-' term[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[32mterm[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[2;27H[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mexpr[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | #empty[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : expr ';' program[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mprogram[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l[3d[?12l[?25h[?25l[A[?12l[?25h[?25l[3d[?12l[?25h[?25l[4;4H[?12l[?25h[?25l[5;8H[?12l[?25h[?25l[6;21H[?12l[?25h[?25l[7;11H[?12l[?25h[?25l[6;21H[?12l[?25h[?25l[5;8H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;116H[60;50H(B[0;7m[ Wrote 132 lines ](B[m[2d[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C
[?2004lexpecting ; at **
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 132 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hterm1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hterm2 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term1 ** term2[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[37;23H[?12l[?25h[?25l[38d[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[39d[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[39;9Heif[1P[?12l[?25h[?25l(B[0;1m[36mif[39m(B[m[1P[?12l[?25h[?25l[39;60r[60;1H
[1;62r[59;5Hindex = 0[39d[?12l[?25h[?25l[39;60r[60;1H
[1;62r[59;5Hlookahead = nextToken()[39d[?12l[?25h[?25l[39;60r[60;1H
[1;62r[59;5Hvalue = program()[39d[?12l[?25h[?25l[39;60r[60;1H
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[39d[?12l[?25h[?25l[39;60r[60;1H
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[39d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l7[36;59r8M[1;62r[37;1H[?12l[?25h[?25l[A[?12l[?25h[?25l7[36;59r8[5T[1;62r[36;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[37;13Hterm1 = term()[38;13Hmatch((B[0;1m[32m'**'[39m(B[m)[39;13Hterm2 = term()[40;13H(B[0;1m[36mreturn[39m(B[m term1 ** term2[41d[?12l[?25h[?25l[41;60r[60;1H
[1;62r[59;5Htokens = scan(text)[40;34H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[41;25H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25leif (check((B[0;1m[32m'-'[39m(B[m)):[41;10H[?12l[?25h[?25l(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[41;11H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 132 lines ](B[m[37;11H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C
[?2004lexpecting ; at **
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 132 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hterm1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hterm2 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term1 ** term2[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m (len(sys.argv) != 2): usage();[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hcontents = readFile(sys.argv[1]);[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hprint(parse(contents))[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m readFile[39m(B[m(path):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwith[39m(B[m open(path, (B[0;1m[32m'r'[39m(B[m) (B[0;1m[36mas[39m(B[m file:[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;60r8M[1;62r[2;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Ht1 = term()[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Hmatch(kind)[?12l[?25h[?25l7[2;59r8M[1;62r[2;11Hkind = lookahead.kind[?12l[?25h[?25l7[2;60r8M[1;62r[2;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[?12l[?25h[?25l7[2;59r8M[1;62r[2;8Ht = term()[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m expr[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mreturn[39m(B[m values[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hmatch((B[0;1m[32m';'[39m(B[m)[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hvalues.append(expr())[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8M[1;62r[2;9Hvalues = [][?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m program[39m(B[m():[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;13H(B[0;1m[36mreturn[39m(B[m tok[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Hindex += 1[?12l[?25h[?25l7[2;59r8M[1;62r[2;13Htok = tokens[index][?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;59r8M[1;62r[2;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[?12l[?25h[?25l7[2;59r8M[1;62r[2;9H(B[0;1m[36mnonlocal[39m(B[m index[?12l[?25h[?25l7[2;59r8M[1;62r[2;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[?12l[?25h[?25l7[2;60r8M[1;62r[2;13Hsys.exit(1)[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l1[?12l[?25h[?25l [?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l2[?12l[?25h[?25l[34d[?12l[?25h[?25l[33;34H[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[33;33H [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l r[?12l[?25h[?25le[?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[42m [49m(B[m[K[?12l[?25h[?25l[42m [49m(B[m[?12l[?25h[?25l [?12l[?25h[?25l t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l(B[0;1m[31m #term2 = term()[32;14H[39m(B[m[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[?12l[?25h[?25l(B[0;1m[31m #term1 = term()[30;14H[39m(B[m[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 132 lines ](B[m[30;14H[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l [?12l[?25h[?25lt[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l*[?12l[?25h[?25l*[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[33;28H[42m [49m(B[m[?12l[?25h[?25l t[?12l[?25h[?25le[?12l[?25h[?25lr[?12l[?25h[?25lm[?12l[?25h[?25l)[?12l[?25h[?25l_[?12l[?25h[?25l [?12l[?25h[?25l [60d[K[33;33H[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[1P[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 132 lines ](B[m[33;28H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C
[?2004lexpecting ; at **
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 132 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;12H(B[0;1m[31m #term1 = term()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;12H(B[0;1m[31m #term2 = term()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m term()**term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hvalue = program()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mif[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hprint(f(B[0;1m[32m'expecting <EOF>, got {lookahead.lexeme}'[39m(B[m, file=sys.stderr)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hsys.exit(1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m scan[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m next_match[39m(B[m(text):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\*\*'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\s+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[35mNone[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'\d+'[39m(B[m).match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, (B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hm = re.compile(r(B[0;1m[32m'.'[39m(B[m).match(text) (B[0;1m[31m #must be last: match any char[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (m): (B[0;1m[36mreturn[39m(B[m (m, m.group())[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = [][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mwhile[39m(B[m (len(text) > 0):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(match, kind) = next_match(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Hlexeme = match.group()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (kind): tokens.append(Token(kind, lexeme))[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9Htext = text[len(lexeme):][?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mreturn[39m(B[m tokens[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H(B[0;1m[36mdef[34m main[39m(B[m():[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[10;24H[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[1;66H(B[0;7m*[116G(B[m[12;25H[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[1P[?12l[?25h[?25l[60;52H(B[0;7m[ Writing... ](B[m[1;66H(B[0;7m [116G(B[m[60;50H(B[0;7m[ Wrote 132 lines ](B[m[12;20H[?12l[?25h[?25l[60d[J[62d[?12l[?25h[62;1H[?1049l[23;0;0t[?1l>[?2004l[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ nano calc.py [11@./calc.py expn-data.txt[C
[?2004l  File "/home/cmcborr1/projects/i471a/submit/lab2/exercises/calc/./calc.py", line 68
    return **term()
           ^
SyntaxError: invalid syntax
[?2004hcmcborr1@remote05:~/projects/i471a/submit/lab2/exercises/calc$ ./calc.py expn-data.txt [11Pnano calc.py[C
[?2004l[?2004h[?1049h[22;0;0t[1;62r(B[m[4l[?7h[39;49m[?1h=[?1h=[?25l[39;49m(B[m[H[2J[60;52H(B[0;7m[ Reading... ](B[m[60;50H(B[0;7m[ Read 132 lines ](B[m[H(B[0;7m  GNU nano 5.4                                           calc.py                                                     [1;116H(B[m[61d(B[0;7m^G(B[m Help[61;17H(B[0;7m^O(B[m Write Out    (B[0;7m^W(B[m Where Is     (B[0;7m^K(B[m Cut[61;65H(B[0;7m^T(B[m Execute[81G(B[0;7m^C(B[m Location     (B[0;7mM-U(B[m Undo[62d(B[0;7m^X(B[m Exit[62;17H(B[0;7m^R(B[m Read File    (B[0;7m^\(B[m Replace[49G(B[0;7m^U(B[m Paste[62;65H(B[0;7m^J(B[m Justify[81G(B[0;7m^_(B[m Go To Line   (B[0;7mM-E(B[m Redo[2d(B[0;1m[31m#!/usr/bin/env python3[4d[36mimport[39m(B[m re[5d(B[0;1m[36mimport[39m(B[m sys[6d(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[9d(B[0;1m[32m"""[10dprogram[11d  : expr ';' program[12d  | #empty[13d  ;[14dexpr[15d  : (term ( ( '+' | '-' ) term ) '**' term)*[16d  ;[17dterm[18d  : '-' term[19d  | factor[20d  ;[21dfactor[22d  : INT[23d  | '(' expr ')'[24d  ;[25d"""[27d[31m#use nested function for encapsulation.[28d[36mdef[34m parse[39m(B[m(text):[30;5H(B[0;1m[36mdef[34m check[39m(B[m(kind): (B[0;1m[36mreturn[39m(B[m lookahead.kind == kind[31;5H(B[0;1m[36mdef[34m match[39m(B[m(kind):[32;9H(B[0;1m[36mnonlocal[39m(B[m lookahead[33;9H(B[0;1m[36mif[39m(B[m (lookahead.kind == kind):[34;13Hlookahead = nextToken()[35;9H(B[0;1m[36melse[39m(B[m:[36dprint(f(B[0;1m[32m'expecting {kind} at {lookahead.lexeme}'[39m(B[m,[37;19Hfile=sys.stderr)[38;13Hsys.exit(1)[39;5H(B[0;1m[36mdef[34m nextToken[39m(B[m():[40;9H(B[0;1m[36mnonlocal[39m(B[m index[41;9H(B[0;1m[36mif[39m(B[m (index >= len(tokens)):[42;13H(B[0;1m[36mreturn[39m(B[m Token((B[0;1m[32m'EOF'[39m(B[m, (B[0;1m[32m'<EOF>'[39m(B[m)[43;9H(B[0;1m[36melse[39m(B[m:[44dtok = tokens[index][45;13Hindex += 1[46;13H(B[0;1m[36mreturn[39m(B[m tok[48;5H(B[0;1m[36mdef[34m program[39m(B[m():[49;9Hvalues = [][50;9H(B[0;1m[36mwhile[39m(B[m ((B[0;1m[36mnot[39m(B[m check((B[0;1m[32m'EOF'[39m(B[m)):[51;13Hvalues.append(expr())[52;13Hmatch((B[0;1m[32m';'[39m(B[m)[53;9H(B[0;1m[36mreturn[39m(B[m values[55;5H(B[0;1m[36mdef[34m expr[39m(B[m():[56;8Ht = term()[57;8H(B[0;1m[36mwhile[39m(B[m (check((B[0;1m[32m'+'[39m(B[m) (B[0;1m[36mor[39m(B[m (check((B[0;1m[32m'-'[39m(B[m))):[58;11Hkind = lookahead.kind[59;11Hmatch(kind)[2d[?12l[?25h[?25l[3d[?12l[?25h[?25l[4d[?12l[?25h[?25l[5d[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9d[?12l[?25h[?25l[10d[?12l[?25h[?25l[11d[?12l[?25h[?25l[12d[?12l[?25h[?25l[13d[?12l[?25h[?25l[14d[?12l[?25h[?25l[15d[?12l[?25h[?25l[16d[?12l[?25h[?25l[17d[?12l[?25h[?25l[18d[?12l[?25h[?25l[19d[?12l[?25h[?25l[20d[?12l[?25h[?25l[21d[?12l[?25h[?25l[22d[?12l[?25h[?25l[23d[?12l[?25h[?25l[24d[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27d[?12l[?25h[?25l[60d[K[28d[?12l[?25h[?25l[29d[?12l[?25h[?25l[30d[?12l[?25h[?25l[31d[?12l[?25h[?25l[32d[?12l[?25h[?25l[33d[?12l[?25h[?25l[34d[?12l[?25h[?25l[35d[?12l[?25h[?25l[36d[?12l[?25h[?25l[37d[?12l[?25h[?25l[38d[?12l[?25h[?25l[39d[?12l[?25h[?25l[40d[?12l[?25h[?25l[41d[?12l[?25h[?25l[42d[?12l[?25h[?25l[43d[?12l[?25h[?25l[44d[?12l[?25h[?25l[45d[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48d[?12l[?25h[?25l[49d[?12l[?25h[?25l[50d[?12l[?25h[?25l[51d[?12l[?25h[?25l[52d[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55d[?12l[?25h[?25l[56d[?12l[?25h[?25l[57d[?12l[?25h[?25l[58d[?12l[?25h[?25l[59d[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;12H(B[0;1m[31m #term1 = term()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;12H(B[0;1m[31m #term2 = term()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m **term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[5;9H[?12l[?25h[?25l[6d[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l([?12l[?25h[?25lk[?12l[?25h[?25li[?12l[?25h[?25ln[?12l[?25h[?25ld[?12l[?25h[?25l)[?12l[?25h[?25l:[?12l[?25h[?25l [?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[C[?12l[?25h[?25l[A[?12l[?25h[?25l[3;17H[?12l[?25h[?25l[2;28H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | '(' expr ')'[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : INT[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mfactor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | factor[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : '-' term[39m(B[m[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[32mterm[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : (term ( ( '+' | '-' ) term ) '**' term)*[2;28H[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mexpr[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  ;[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  | #empty[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m  : expr ';' program[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32mprogram[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[32m"""[39m(B[m[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mfrom[39m(B[m collections (B[0;1m[36mimport[39m(B[m namedtuple[28G[?12l[?25h[?25l7[2;60r8M[1;62r[2;1H(B[0;1m[36mimport[39m(B[m sys[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[36mimport[39m(B[m re[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H[?12l[?25h[?25l7[2;59r8M[1;62r[2;1H(B[0;1m[31m#!/usr/bin/env python3[39m(B[m[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[3d[?12l[?25h[?25l[4;10H[?12l[?25h[?25l[5ds[?12l[?25h[?25l[6;28H[?12l[?25h[?25l[7d[?12l[?25h[?25l[8d[?12l[?25h[?25l[9;4H[?12l[?25h[?25l[10;8H[?12l[?25h[?25l[11;21H[?12l[?25h[?25l[12;11H[?12l[?25h[?25l[13;4H[?12l[?25h[?25l[14;5H[?12l[?25h[?25l[15;28H[?12l[?25h[?25l[16;4H[?12l[?25h[?25l[17;5H[?12l[?25h[?25l[18;13H[?12l[?25h[?25l[19d[?12l[?25h[?25l[20;4H[?12l[?25h[?25l[21;7H[?12l[?25h[?25l[22;8H[?12l[?25h[?25l[23;17H[?12l[?25h[?25l[24;4H[?12l[?25h[?25l[25d[?12l[?25h[?25l[26d[?12l[?25h[?25l[27;28H[?12l[?25h[?25l[28;17H[?12l[?25h[?25l[29d[?12l[?25h[?25l[30;28H[?12l[?25h[?25l[31;21H[?12l[?25h[?25l[32;27H[?12l[?25h[?25l[33d [?12l[?25h[?25l[34d[?12l[?25h[?25l[35;14H[?12l[?25h[?25l[36;28H[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;24H[?12l[?25h[?25l[Asys.[?12l[?25h[?25l[A[?12l[?25h[?25l[35;14H[?12l[?25h[?25l[34;28H[?12l[?25h[?25l[A[?12l[?25h[?25l[A[?12l[?25h[?25l[31;21H[?12l[?25h[?25l[32;27H[?12l[?25h[?25l[33d [?12l[?25h[?25l[34d[?12l[?25h[?25l[35;14H[?12l[?25h[?25l[36;28H[?12l[?25h[?25l[37d[?12l[?25h[?25l[38;24H[?12l[?25h[?25l[39;21H[?12l[?25h[?25l[40dex[?12l[?25h[?25l[41;28H[?12l[?25h[?25l[42d[?12l[?25h[?25l[43;14H[?12l[?25h[?25l[44;28H[?12l[?25h[?25l[45;23H[?12l[?25h[?25l[46d[?12l[?25h[?25l[47d[?12l[?25h[?25l[48;19H[?12l[?25h[?25l[49d][?12l[?25h[?25l[50;28H[?12l[?25h[?25l[51d[?12l[?25h[?25l[52;23H[?12l[?25h[?25l[53d[?12l[?25h[?25l[54d[?12l[?25h[?25l[55;16H[?12l[?25h[?25l[56d()[?12l[?25h[?25l[57;28H[?12l[?25h[?25l[58d[?12l[?25h[?25l[59;22H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht1 = term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;11Ht += (t1 (B[0;1m[36mif[39m(B[m (kind == (B[0;1m[32m'+'[39m(B[m) (B[0;1m[36melse[39m(B[m -t1)[59;28H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;8H(B[0;1m[36mreturn[39m(B[m t[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m term[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'**'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;12H(B[0;1m[31m #term1 = term()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'**'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;12H(B[0;1m[31m #term2 = term()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m **term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melif[39m(B[m (check((B[0;1m[32m'-'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'-'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m - term()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m factor()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5H(B[0;1m[36mdef[34m factor[39m(B[m():[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36mif[39m(B[m (check((B[0;1m[32m'INT'[39m(B[m)):[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = int(lookahead.lexeme)[59;28H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'INT'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;9H(B[0;1m[36melse[39m(B[m:[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m'('[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hvalue = expr()[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13Hmatch((B[0;1m[32m')'[39m(B[m)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;13H(B[0;1m[36mreturn[39m(B[m value[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;1H[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;4H(B[0;1m[31m #begin parse()[39m(B[m[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Htokens = scan(text)[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hindex = 0[?12l[?25h[?25l7[2;60r8[60d
[1;62r[59;5Hlookahead = nextToken()[?12l[?25h[?25l[58;14H[?12l[?25h[?25l[57;24H[?12l[?25h[?25l[56;19H[?12l[?25h[?25l[A[?12l[?25h[?25l[54;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Apr()[?12l[?25h[?25l[A[?12l[?25h[?25l[50;14H[?12l[?25h[?25l[49;25H[?12l[?25h[?25l[A[?12l[?25h[?25l[Aloo[?12l[?25h[?25l[A[?12l[?25h[?25l[45;18H[?12l[?25h[?25l[A[?12l[?25h[?25l[43;28